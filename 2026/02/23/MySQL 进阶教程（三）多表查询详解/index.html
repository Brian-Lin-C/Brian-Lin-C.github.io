<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 进阶教程（三）多表查询详解 | 过拟合的炸鱼薯条</title><meta name="author" content="过拟合的炸鱼薯条"><meta name="copyright" content="过拟合的炸鱼薯条"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL 进阶教程（三）多表查询详解在实际应用中，数据通常分布在多个表中。多表查询是 SQL 中最重要、最实用的技能之一。本文将详细讲解多表关系、连接查询、联合查询和子查询。 一、多表关系介绍1.1 表与表之间的关系数据库中的表不是孤立的，它们之间通过各种关系相互关联。主要有三种关系：    关系类型 说明 示例    一对一（1:1） 一个表的一条记录对应另一个表的一条记录 用户和用户详情">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 进阶教程（三）多表查询详解">
<meta property="og:url" content="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="过拟合的炸鱼薯条">
<meta property="og:description" content="MySQL 进阶教程（三）多表查询详解在实际应用中，数据通常分布在多个表中。多表查询是 SQL 中最重要、最实用的技能之一。本文将详细讲解多表关系、连接查询、联合查询和子查询。 一、多表关系介绍1.1 表与表之间的关系数据库中的表不是孤立的，它们之间通过各种关系相互关联。主要有三种关系：    关系类型 说明 示例    一对一（1:1） 一个表的一条记录对应另一个表的一条记录 用户和用户详情">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg">
<meta property="article:published_time" content="2026-02-23T09:00:00.000Z">
<meta property="article:modified_time" content="2026-02-23T03:56:47.792Z">
<meta property="article:author" content="过拟合的炸鱼薯条">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="多表查询">
<meta property="article:tag" content="子查询">
<meta property="article:tag" content="连接查询">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 进阶教程（三）多表查询详解",
  "url": "https://brian-lin-c.github.io/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/",
  "image": "https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg",
  "datePublished": "2026-02-23T09:00:00.000Z",
  "dateModified": "2026-02-23T03:56:47.792Z",
  "author": [
    {
      "@type": "Person",
      "name": "过拟合的炸鱼薯条",
      "url": "https://brian-lin-c.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 进阶教程（三）多表查询详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">过拟合的炸鱼薯条</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 进阶教程（三）多表查询详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 进阶教程（三）多表查询详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-23T09:00:00.000Z" title="发表于 2026-02-23 17:00:00">2026-02-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-23T03:56:47.792Z" title="更新于 2026-02-23 11:56:47">2026-02-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL-%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B/">MySQL 进阶教程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>19分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MySQL-进阶教程（三）多表查询详解"><a href="#MySQL-进阶教程（三）多表查询详解" class="headerlink" title="MySQL 进阶教程（三）多表查询详解"></a>MySQL 进阶教程（三）多表查询详解</h1><p>在实际应用中，数据通常分布在多个表中。多表查询是 SQL 中最重要、最实用的技能之一。本文将详细讲解多表关系、连接查询、联合查询和子查询。</p>
<h2 id="一、多表关系介绍"><a href="#一、多表关系介绍" class="headerlink" title="一、多表关系介绍"></a>一、多表关系介绍</h2><h3 id="1-1-表与表之间的关系"><a href="#1-1-表与表之间的关系" class="headerlink" title="1.1 表与表之间的关系"></a>1.1 表与表之间的关系</h3><p>数据库中的表不是孤立的，它们之间通过各种关系相互关联。主要有三种关系：</p>
<table>
<thead>
<tr>
<th>关系类型</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>一对一（1:1）</td>
<td>一个表的一条记录对应另一个表的一条记录</td>
<td>用户和用户详情</td>
</tr>
<tr>
<td>一对多（1:N）</td>
<td>一个表的一条记录对应另一个表的多条记录</td>
<td>部门和员工</td>
</tr>
<tr>
<td>多对多（N:M）</td>
<td>一个表的多条记录对应另一个表的多条记录</td>
<td>学生和课程</td>
</tr>
</tbody></table>
<h3 id="1-2-一对一关系（1-1）"><a href="#1-2-一对一关系（1-1）" class="headerlink" title="1.2 一对一关系（1:1）"></a>1.2 一对一关系（1:1）</h3><p><strong>特点</strong>：</p>
<ul>
<li>表 A 的一条记录对应表 B 的一条记录</li>
<li>通常用于拆分大表，提高性能</li>
<li>外键可以放在任意一方</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    password <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户详情表（一对一）</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> user_profiles (</span><br><span class="line">    user_id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span>,  <span class="comment">-- 也是主键，保证一对一</span></span><br><span class="line">    real_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    phone <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (user_id) <span class="keyword">REFERENCES</span> users(id) <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询用户及其详情</span></span><br><span class="line"><span class="keyword">SELECT</span> u.username, p.real_name, p.phone, p.address</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">JOIN</span> user_profiles p <span class="keyword">ON</span> u.id <span class="operator">=</span> p.user_id;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-一对多关系（1-N）"><a href="#1-3-一对多关系（1-N）" class="headerlink" title="1.3 一对多关系（1:N）"></a>1.3 一对多关系（1:N）</h3><p><strong>特点</strong>：</p>
<ul>
<li>表 A 的一条记录对应表 B 的多条记录</li>
<li>外键放在”多”的一方</li>
<li>最常见表关系</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表（一方）</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> departments (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    dept_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表（多方）</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    dept_id <span class="type">INT</span>,  <span class="comment">-- 外键指向部门表</span></span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (dept_id) <span class="keyword">REFERENCES</span> departments(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一个部门有多个员工</span></span><br><span class="line"><span class="comment">-- 一个员工只属于一个部门</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-多对多关系（N-M）"><a href="#1-4-多对多关系（N-M）" class="headerlink" title="1.4 多对多关系（N:M）"></a>1.4 多对多关系（N:M）</h3><p><strong>特点</strong>：</p>
<ul>
<li>表 A 的多条记录对应表 B 的多条记录</li>
<li>需要第三张关联表（中间表）</li>
<li>关联表包含两个外键</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 学生表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> students (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 课程表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> courses (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    course_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 选课表（中间表）</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> enrollments (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    student_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    course_id <span class="type">INT</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    enroll_date <span class="type">DATE</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_DATE</span>,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (student_id) <span class="keyword">REFERENCES</span> students(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (course_id) <span class="keyword">REFERENCES</span> courses(id),</span><br><span class="line">    <span class="keyword">UNIQUE</span> KEY uk_student_course (student_id, course_id)  <span class="comment">-- 防止重复选课</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一个学生可以选多门课</span></span><br><span class="line"><span class="comment">-- 一门课可以被多个学生选</span></span><br></pre></td></tr></table></figure>

<h2 id="二、多表查询概述"><a href="#二、多表查询概述" class="headerlink" title="二、多表查询概述"></a>二、多表查询概述</h2><h3 id="2-1-多表查询的方式"><a href="#2-1-多表查询的方式" class="headerlink" title="2.1 多表查询的方式"></a>2.1 多表查询的方式</h3><table>
<thead>
<tr>
<th>查询方式</th>
<th>说明</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>连接查询</td>
<td>通过连接条件将多个表关联</td>
<td>JOIN</td>
</tr>
<tr>
<td>联合查询</td>
<td>将多个查询结果合并</td>
<td>UNION</td>
</tr>
<tr>
<td>子查询</td>
<td>在一个查询中嵌套另一个查询</td>
<td>子 SELECT</td>
</tr>
</tbody></table>
<h3 id="2-2-笛卡尔积"><a href="#2-2-笛卡尔积" class="headerlink" title="2.2 笛卡尔积"></a>2.2 笛卡尔积</h3><p>当两个表进行连接时，如果没有连接条件，会得到笛卡尔积。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表 A 有 3 条记录，表 B 有 4 条记录</span></span><br><span class="line"><span class="comment">-- 笛卡尔积结果：3 × 4 = 12 条记录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 笛卡尔积（不推荐，数据量大会爆炸）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_a, table_b;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 正确做法：添加连接条件</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_a, table_b <span class="keyword">WHERE</span> table_a.id <span class="operator">=</span> table_b.a_id;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-准备测试数据"><a href="#2-3-准备测试数据" class="headerlink" title="2.3 准备测试数据"></a>2.3 准备测试数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> departments;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> departments (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    dept_name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    dept_location <span class="type">VARCHAR</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> employees;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    emp_no <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    gender ENUM(<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">    dept_id <span class="type">INT</span>,</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    manager_id <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (dept_id) <span class="keyword">REFERENCES</span> departments(id),</span><br><span class="line">    <span class="keyword">FOREIGN KEY</span> (manager_id) <span class="keyword">REFERENCES</span> employees(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入部门</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> departments (dept_name, dept_location) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;技术部&#x27;</span>, <span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;市场部&#x27;</span>, <span class="string">&#x27;上海&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;财务部&#x27;</span>, <span class="string">&#x27;北京&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;人事部&#x27;</span>, <span class="string">&#x27;广州&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入员工</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (emp_no, name, gender, dept_id, salary, manager_id) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;E001&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">1</span>, <span class="number">10000</span>, <span class="keyword">NULL</span>),      <span class="comment">-- 技术部经理</span></span><br><span class="line">(<span class="string">&#x27;E002&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">1</span>, <span class="number">8000</span>, <span class="number">1</span>),          <span class="comment">-- 技术部员工</span></span><br><span class="line">(<span class="string">&#x27;E003&#x27;</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">1</span>, <span class="number">9000</span>, <span class="number">1</span>),          <span class="comment">-- 技术部员工</span></span><br><span class="line">(<span class="string">&#x27;E004&#x27;</span>, <span class="string">&#x27;赵六&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">2</span>, <span class="number">8500</span>, <span class="keyword">NULL</span>),       <span class="comment">-- 市场部经理</span></span><br><span class="line">(<span class="string">&#x27;E005&#x27;</span>, <span class="string">&#x27;孙七&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2</span>, <span class="number">7500</span>, <span class="number">4</span>),          <span class="comment">-- 市场部员工</span></span><br><span class="line">(<span class="string">&#x27;E006&#x27;</span>, <span class="string">&#x27;周八&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">3</span>, <span class="number">9000</span>, <span class="keyword">NULL</span>),       <span class="comment">-- 财务部经理</span></span><br><span class="line">(<span class="string">&#x27;E007&#x27;</span>, <span class="string">&#x27;吴九&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">6000</span>, <span class="keyword">NULL</span>);    <span class="comment">-- 暂无部门</span></span><br></pre></td></tr></table></figure>

<h2 id="三、内连接（INNER-JOIN）"><a href="#三、内连接（INNER-JOIN）" class="headerlink" title="三、内连接（INNER JOIN）"></a>三、内连接（INNER JOIN）</h2><h3 id="3-1-内连接概述"><a href="#3-1-内连接概述" class="headerlink" title="3.1 内连接概述"></a>3.1 内连接概述</h3><p><strong>内连接</strong> 返回两个表中满足连接条件的记录。</p>
<p><strong>特点</strong>：</p>
<ul>
<li>只返回匹配的记录</li>
<li>不匹配的记录不会出现在结果中</li>
<li>最常用的连接方式</li>
</ul>
<h3 id="3-2-内连接语法"><a href="#3-2-内连接语法" class="headerlink" title="3.2 内连接语法"></a>3.2 内连接语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 标准语法（推荐）</span></span><br><span class="line"><span class="keyword">SELECT</span> 列名</span><br><span class="line"><span class="keyword">FROM</span> 表 <span class="number">1</span></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表 <span class="number">2</span> <span class="keyword">ON</span> 连接条件</span><br><span class="line">[<span class="keyword">WHERE</span> 条件]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序列]</span><br><span class="line">[LIMIT 数量];</span><br><span class="line"></span><br><span class="line"><span class="comment">-- INNER 可以省略</span></span><br><span class="line"><span class="keyword">SELECT</span> 列名</span><br><span class="line"><span class="keyword">FROM</span> 表 <span class="number">1</span></span><br><span class="line"><span class="keyword">JOIN</span> 表 <span class="number">2</span> <span class="keyword">ON</span> 连接条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多表连接</span></span><br><span class="line"><span class="keyword">SELECT</span> 列名</span><br><span class="line"><span class="keyword">FROM</span> 表 <span class="number">1</span></span><br><span class="line"><span class="keyword">JOIN</span> 表 <span class="number">2</span> <span class="keyword">ON</span> 表 <span class="number">1.</span>id <span class="operator">=</span> 表 <span class="number">2.</span>表 <span class="number">1</span>_id</span><br><span class="line"><span class="keyword">JOIN</span> 表 <span class="number">3</span> <span class="keyword">ON</span> 表 <span class="number">2.</span>id <span class="operator">=</span> 表 <span class="number">3.</span>表 <span class="number">2</span>_id;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-内连接示例"><a href="#3-3-内连接示例" class="headerlink" title="3.3 内连接示例"></a>3.3 内连接示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询员工及其所属部门</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询技术部员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.dept_name <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资高于 8000 的员工及部门</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name, d.dept_location</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="operator">&gt;</span> <span class="number">8000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多条件连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> e.gender <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">AND</span> d.dept_location <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-隐式内连接"><a href="#3-4-隐式内连接" class="headerlink" title="3.4 隐式内连接"></a>3.4 隐式内连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 隐式内连接（旧语法，不推荐）</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e, departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价于显式内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：隐式连接容易遗漏 WHERE 条件导致笛卡尔积</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-多表内连接"><a href="#3-5-多表内连接" class="headerlink" title="3.5 多表内连接"></a>3.5 多表内连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询员工、部门及其上级领导</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    e.name <span class="keyword">AS</span> 员工，</span><br><span class="line">    d.dept_name <span class="keyword">AS</span> 部门，</span><br><span class="line">    m.name <span class="keyword">AS</span> 上级领导</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 三表连接示例：学生 - 选课 - 课程</span></span><br><span class="line"><span class="keyword">SELECT</span> s.name <span class="keyword">AS</span> 学生，c.course_name <span class="keyword">AS</span> 课程，e.score <span class="keyword">AS</span> 成绩</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">JOIN</span> enrollments e <span class="keyword">ON</span> s.id <span class="operator">=</span> e.student_id</span><br><span class="line"><span class="keyword">JOIN</span> courses c <span class="keyword">ON</span> e.course_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>

<h2 id="四、外连接（OUTER-JOIN）"><a href="#四、外连接（OUTER-JOIN）" class="headerlink" title="四、外连接（OUTER JOIN）"></a>四、外连接（OUTER JOIN）</h2><h3 id="4-1-外连接概述"><a href="#4-1-外连接概述" class="headerlink" title="4.1 外连接概述"></a>4.1 外连接概述</h3><p><strong>外连接</strong> 返回一个表的所有记录，另一个表只返回匹配的记录。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
<th>返回</th>
</tr>
</thead>
<tbody><tr>
<td>左连接（LEFT JOIN）</td>
<td>返回左表所有记录</td>
<td>左表全部 + 右表匹配</td>
</tr>
<tr>
<td>右连接（RIGHT JOIN）</td>
<td>返回右表所有记录</td>
<td>右表全部 + 左表匹配</td>
</tr>
<tr>
<td>全外连接（FULL JOIN）</td>
<td>返回两个表所有记录</td>
<td>MySQL 不支持</td>
</tr>
</tbody></table>
<h3 id="4-2-左连接（LEFT-JOIN）"><a href="#4-2-左连接（LEFT-JOIN）" class="headerlink" title="4.2 左连接（LEFT JOIN）"></a>4.2 左连接（LEFT JOIN）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有员工及其部门（包括没有部门的员工）</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.dept_id, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结果：吴九（dept_id=NULL）也会显示，dept_name 为 NULL</span></span><br></pre></td></tr></table></figure>

<p><strong>左连接特点</strong>：</p>
<ul>
<li>左表的所有记录都会返回</li>
<li>右表没有匹配的记录填充 NULL</li>
</ul>
<h3 id="4-3-右连接（RIGHT-JOIN）"><a href="#4-3-右连接（RIGHT-JOIN）" class="headerlink" title="4.3 右连接（RIGHT JOIN）"></a>4.3 右连接（RIGHT JOIN）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有部门及其员工（包括没有员工的部门）</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, e.name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价于（推荐）</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, e.name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure>

<p><strong>右连接特点</strong>：</p>
<ul>
<li>右表的所有记录都会返回</li>
<li>左表没有匹配的记录填充 NULL</li>
<li>可以用左连接替代</li>
</ul>
<h3 id="4-4-左连接-vs-内连接"><a href="#4-4-左连接-vs-内连接" class="headerlink" title="4.4 左连接 vs 内连接"></a>4.4 左连接 vs 内连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 内连接：只返回有部门的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"><span class="comment">-- 吴九不会出现在结果中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左连接：返回所有员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"><span class="comment">-- 吴九会显示，dept_name 为 NULL</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-外连接查询不匹配记录"><a href="#4-5-外连接查询不匹配记录" class="headerlink" title="4.5 外连接查询不匹配记录"></a>4.5 外连接查询不匹配记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询没有员工的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id</span><br><span class="line"><span class="keyword">WHERE</span> e.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有部门的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有选课的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> s.name</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> enrollments e <span class="keyword">ON</span> s.id <span class="operator">=</span> e.student_id</span><br><span class="line"><span class="keyword">WHERE</span> e.course_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-6-外连接条件位置"><a href="#4-6-外连接条件位置" class="headerlink" title="4.6 外连接条件位置"></a>4.6 外连接条件位置</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 连接条件在 ON 子句</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 过滤条件在 WHERE 子句</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.dept_location <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：ON 和 WHERE 的区别</span></span><br><span class="line"><span class="comment">-- ON 在连接时过滤，WHERE 在连接后过滤</span></span><br></pre></td></tr></table></figure>

<h2 id="五、自连接（SELF-JOIN）"><a href="#五、自连接（SELF-JOIN）" class="headerlink" title="五、自连接（SELF JOIN）"></a>五、自连接（SELF JOIN）</h2><h3 id="5-1-自连接概述"><a href="#5-1-自连接概述" class="headerlink" title="5.1 自连接概述"></a>5.1 自连接概述</h3><p><strong>自连接</strong> 是表自己与自己连接，用于查询具有层级关系的数据。</p>
<p><strong>特点</strong>：</p>
<ul>
<li>同一张表使用不同的别名</li>
<li>常用于组织架构、分类层级等</li>
</ul>
<h3 id="5-2-自连接示例"><a href="#5-2-自连接示例" class="headerlink" title="5.2 自连接示例"></a>5.2 自连接示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询员工及其上级领导</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    e.name <span class="keyword">AS</span> 员工，</span><br><span class="line">    e.emp_no <span class="keyword">AS</span> 员工编号，</span><br><span class="line">    m.name <span class="keyword">AS</span> 上级领导，</span><br><span class="line">    m.emp_no <span class="keyword">AS</span> 领导编号</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有领导（带下属的员工）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> m.id, m.name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有下属的员工（普通员工）</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees sub <span class="keyword">ON</span> sub.manager_id <span class="operator">=</span> e.id</span><br><span class="line"><span class="keyword">WHERE</span> sub.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-层级查询"><a href="#5-3-层级查询" class="headerlink" title="5.3 层级查询"></a>5.3 层级查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询员工的完整汇报链（需要递归，MySQL 8.0+ 使用 CTE）</span></span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">RECURSIVE</span> emp_hierarchy <span class="keyword">AS</span> (</span><br><span class="line">    <span class="comment">-- 基础查询：顶级领导（没有上级）</span></span><br><span class="line">    <span class="keyword">SELECT</span> id, name, manager_id, <span class="number">0</span> <span class="keyword">AS</span> level</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 递归查询：下属</span></span><br><span class="line">    <span class="keyword">SELECT</span> e.id, e.name, e.manager_id, eh.level <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">FROM</span> employees e</span><br><span class="line">    <span class="keyword">JOIN</span> emp_hierarchy eh <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> eh.id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp_hierarchy;</span><br></pre></td></tr></table></figure>

<h3 id="5-4-自连接其他应用"><a href="#5-4-自连接其他应用" class="headerlink" title="5.4 自连接其他应用"></a>5.4 自连接其他应用</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询同一部门的员工对</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.name <span class="keyword">AS</span> 员工 <span class="number">1</span>, e2.name <span class="keyword">AS</span> 员工 <span class="number">2</span>, e1.dept_id</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">JOIN</span> employees e2 <span class="keyword">ON</span> e1.dept_id <span class="operator">=</span> e2.dept_id <span class="keyword">AND</span> e1.id <span class="operator">&lt;</span> e2.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资比同事高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.name, e1.salary, e2.name <span class="keyword">AS</span> 同事，e2.salary <span class="keyword">AS</span> 同事工资</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">JOIN</span> employees e2 <span class="keyword">ON</span> e1.dept_id <span class="operator">=</span> e2.dept_id</span><br><span class="line"><span class="keyword">WHERE</span> e1.salary <span class="operator">&gt;</span> e2.salary <span class="keyword">AND</span> e1.id <span class="operator">!=</span> e2.id;</span><br></pre></td></tr></table></figure>

<h2 id="六、联合查询（UNION）"><a href="#六、联合查询（UNION）" class="headerlink" title="六、联合查询（UNION）"></a>六、联合查询（UNION）</h2><h3 id="6-1-UNION-概述"><a href="#6-1-UNION-概述" class="headerlink" title="6.1 UNION 概述"></a>6.1 UNION 概述</h3><p><strong>UNION</strong> 用于将多个 SELECT 查询的结果合并为一个结果集。</p>
<p><strong>特点</strong>：</p>
<ul>
<li>自动去重（UNION ALL 不去重）</li>
<li>所有查询的列数必须相同</li>
<li>对应列的数据类型必须兼容</li>
</ul>
<h3 id="6-2-UNION-语法"><a href="#6-2-UNION-语法" class="headerlink" title="6.2 UNION 语法"></a>6.2 UNION 语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列 <span class="number">1</span>, 列 <span class="number">2</span> <span class="keyword">FROM</span> 表 <span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 列 <span class="number">1</span>, 列 <span class="number">2</span> <span class="keyword">FROM</span> 表 <span class="number">2</span></span><br><span class="line">[<span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 列 <span class="number">1</span>, 列 <span class="number">2</span> <span class="keyword">FROM</span> 表 <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<h3 id="6-3-UNION-示例"><a href="#6-3-UNION-示例" class="headerlink" title="6.3 UNION 示例"></a>6.3 UNION 示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- UNION：合并两个查询结果并去重</span></span><br><span class="line"><span class="keyword">SELECT</span> name, dept_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">9000</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> name, dept_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNION ALL：合并但保留重复（性能更好）</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> gender <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多个查询合并</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;高工资&#x27;</span> <span class="keyword">AS</span> 类型，name <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="number">9000</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;北京部门&#x27;</span> <span class="keyword">AS</span> 类型，name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.dept_location <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;经理&#x27;</span> <span class="keyword">AS</span> 类型，name <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-UNION-vs-OR"><a href="#6-4-UNION-vs-OR" class="headerlink" title="6.4 UNION vs OR"></a>6.4 UNION vs OR</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 UNION（推荐，可以利用索引）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用 OR（可能影响索引使用）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">OR</span> dept_id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNION 适用场景：</span></span><br><span class="line"><span class="comment">-- 1. 查询不同表的数据合并</span></span><br><span class="line"><span class="comment">-- 2. 复杂 OR 条件优化</span></span><br></pre></td></tr></table></figure>

<h3 id="6-5-UNION-排序和分页"><a href="#6-5-UNION-排序和分页" class="headerlink" title="6.5 UNION 排序和分页"></a>6.5 UNION 排序和分页</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- UNION 后排序（对整个结果集排序）</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>)</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">2</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- UNION 后分页</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>)</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">2</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">5</span>, <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意：每个 SELECT 单独加 ORDER BY 需要使用括号</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span> LIMIT <span class="number">3</span>)</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">(<span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">ASC</span> LIMIT <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h2 id="七、子查询介绍"><a href="#七、子查询介绍" class="headerlink" title="七、子查询介绍"></a>七、子查询介绍</h2><h3 id="7-1-子查询概述"><a href="#7-1-子查询概述" class="headerlink" title="7.1 子查询概述"></a>7.1 子查询概述</h3><p><strong>子查询</strong> 是嵌套在其他 SQL 语句中的 SELECT 查询。</p>
<p><strong>子查询的位置</strong>：</p>
<ul>
<li>WHERE 子句中</li>
<li>FROM 子句中</li>
<li>SELECT 子句中</li>
<li>HAVING 子句中</li>
</ul>
<p><strong>子查询的分类</strong>：</p>
<ul>
<li>标量子查询：返回单个值</li>
<li>列子查询：返回单列多行</li>
<li>行子查询：返回单行多列</li>
<li>表子查询：返回多行多列</li>
</ul>
<h3 id="7-2-子查询基本语法"><a href="#7-2-子查询基本语法" class="headerlink" title="7.2 子查询基本语法"></a>7.2 子查询基本语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- WHERE 子句中的子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- FROM 子句中的子查询（派生表）</span></span><br><span class="line"><span class="keyword">SELECT</span> dept_name, avg_salary</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> d.dept_name, <span class="built_in">AVG</span>(e.salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> departments d</span><br><span class="line">    <span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> d.id</span><br><span class="line">) <span class="keyword">AS</span> dept_stats;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SELECT 子句中的子查询（标量）</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary,</span><br><span class="line">       (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees) <span class="keyword">AS</span> 公司平均工资</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="八、标量子查询"><a href="#八、标量子查询" class="headerlink" title="八、标量子查询"></a>八、标量子查询</h2><h3 id="8-1-标量子查询概述"><a href="#8-1-标量子查询概述" class="headerlink" title="8.1 标量子查询概述"></a>8.1 标量子查询概述</h3><p><strong>标量子查询</strong> 返回单个值（一行一列），通常用于比较。</p>
<h3 id="8-2-标量子查询示例"><a href="#8-2-标量子查询示例" class="headerlink" title="8.2 标量子查询示例"></a>8.2 标量子查询示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资高于平均工资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资最高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询入职最早的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, hire_date <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> hire_date <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(hire_date) <span class="keyword">FROM</span> employees);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询低于本部门平均工资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.name, e1.dept_id, e1.salary</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">WHERE</span> e1.salary <span class="operator">&lt;</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(e2.salary)</span><br><span class="line">    <span class="keyword">FROM</span> employees e2</span><br><span class="line">    <span class="keyword">WHERE</span> e2.dept_id <span class="operator">=</span> e1.dept_id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在 SELECT 中使用标量子查询</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    name,</span><br><span class="line">    salary,</span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees) <span class="keyword">AS</span> 公司平均工资，</span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(e2.salary) <span class="keyword">FROM</span> employees e2 <span class="keyword">WHERE</span> e2.dept_id <span class="operator">=</span> e.dept_id) <span class="keyword">AS</span> 部门平均工资</span><br><span class="line"><span class="keyword">FROM</span> employees e;</span><br></pre></td></tr></table></figure>

<h2 id="九、列子查询"><a href="#九、列子查询" class="headerlink" title="九、列子查询"></a>九、列子查询</h2><h3 id="9-1-列子查询概述"><a href="#9-1-列子查询概述" class="headerlink" title="9.1 列子查询概述"></a>9.1 列子查询概述</h3><p><strong>列子查询</strong> 返回单列多行，通常与 IN、NOT IN、ANY、ALL 配合使用。</p>
<h3 id="9-2-IN-NOT-IN"><a href="#9-2-IN-NOT-IN" class="headerlink" title="9.2 IN &#x2F; NOT IN"></a>9.2 IN &#x2F; NOT IN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询技术部和市场部的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, dept_id <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> dept_id <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> id <span class="keyword">FROM</span> departments <span class="keyword">WHERE</span> dept_name <span class="keyword">IN</span> (<span class="string">&#x27;技术部&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有员工的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> dept_name <span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> dept_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="keyword">IS</span> <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询选了某门课程的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> name <span class="keyword">FROM</span> students</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> student_id <span class="keyword">FROM</span> enrollments <span class="keyword">WHERE</span> course_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="9-3-ANY-SOME"><a href="#9-3-ANY-SOME" class="headerlink" title="9.3 ANY &#x2F; SOME"></a>9.3 ANY &#x2F; SOME</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资比任一技术部员工高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="keyword">ANY</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价于（使用 MIN）</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h3 id="9-4-ALL"><a href="#9-4-ALL" class="headerlink" title="9.4 ALL"></a>9.4 ALL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资比所有技术部员工都高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> <span class="keyword">ALL</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> salary <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价于（使用 MAX）</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h2 id="十、行子查询"><a href="#十、行子查询" class="headerlink" title="十、行子查询"></a>十、行子查询</h2><h3 id="10-1-行子查询概述"><a href="#10-1-行子查询概述" class="headerlink" title="10.1 行子查询概述"></a>10.1 行子查询概述</h3><p><strong>行子查询</strong> 返回单行多列，可以与行构造符配合使用。</p>
<h3 id="10-2-行子查询示例"><a href="#10-2-行子查询示例" class="headerlink" title="10.2 行子查询示例"></a>10.2 行子查询示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资和部门都与张三相同的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, dept_id, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (salary, dept_id) <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> salary, dept_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用行构造符比较</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (dept_id, salary) <span class="operator">&gt;</span> (<span class="number">1</span>, <span class="number">8000</span>);  <span class="comment">-- dept_id&gt;1 或 (dept_id=1 且 salary&gt;8000)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资最高的前几名员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (salary, id) <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> salary, id <span class="keyword">FROM</span> employees <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span> LIMIT <span class="number">3</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="十一、表子查询"><a href="#十一、表子查询" class="headerlink" title="十一、表子查询"></a>十一、表子查询</h2><h3 id="11-1-表子查询概述"><a href="#11-1-表子查询概述" class="headerlink" title="11.1 表子查询概述"></a>11.1 表子查询概述</h3><p><strong>表子查询</strong> 返回多行多列，通常用作派生表（FROM 子句中的子查询）。</p>
<h3 id="11-2-FROM-子句中的子查询"><a href="#11-2-FROM-子句中的子查询" class="headerlink" title="11.2 FROM 子句中的子查询"></a>11.2 FROM 子句中的子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询各部门平均工资及高于平均工资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name, d.avg_salary</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> dept_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id</span><br><span class="line">) d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.dept_id</span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="operator">&gt;</span> d.avg_salary;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询员工数超过 2 人的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, dept_stats.emp_count</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> dept_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> emp_count</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> dept_id</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span></span><br><span class="line">) dept_stats <span class="keyword">ON</span> d.id <span class="operator">=</span> dept_stats.dept_id;</span><br></pre></td></tr></table></figure>

<h3 id="11-3-相关子查询（EXISTS）"><a href="#11-3-相关子查询（EXISTS）" class="headerlink" title="11.3 相关子查询（EXISTS）"></a>11.3 相关子查询（EXISTS）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询有员工的部门（使用 EXISTS）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> employees e <span class="keyword">WHERE</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询没有员工的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> employees e <span class="keyword">WHERE</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询至少选了 2 门课的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">WHERE</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> enrollments e <span class="keyword">WHERE</span> e.student_id <span class="operator">=</span> s.id</span><br><span class="line">) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="十二、多表查询综合练习"><a href="#十二、多表查询综合练习" class="headerlink" title="十二、多表查询综合练习"></a>十二、多表查询综合练习</h2><h3 id="练习-1：基础查询"><a href="#练习-1：基础查询" class="headerlink" title="练习 1：基础查询"></a>练习 1：基础查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 查询所有员工姓名、工资、部门名称</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查询北京部门的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, d.dept_name, d.dept_location</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.dept_location <span class="operator">=</span> <span class="string">&#x27;北京&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 查询工资高于公司平均工资的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> name, salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> employees);</span><br></pre></td></tr></table></figure>

<h3 id="练习-2：分组统计"><a href="#练习-2：分组统计" class="headerlink" title="练习 2：分组统计"></a>练习 2：分组统计</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4. 查询各部门人数</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, <span class="built_in">COUNT</span>(e.id) <span class="keyword">AS</span> emp_count</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.id, d.dept_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 查询各部门平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, ROUND(<span class="built_in">AVG</span>(e.salary), <span class="number">2</span>) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.id, d.dept_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6. 查询平均工资高于 8000 的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> d.dept_name, ROUND(<span class="built_in">AVG</span>(e.salary), <span class="number">2</span>) <span class="keyword">AS</span> avg_salary</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> employees e <span class="keyword">ON</span> d.id <span class="operator">=</span> e.dept_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.id, d.dept_name</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(e.salary) <span class="operator">&gt;</span> <span class="number">8000</span>;</span><br></pre></td></tr></table></figure>

<h3 id="练习-3：复杂查询"><a href="#练习-3：复杂查询" class="headerlink" title="练习 3：复杂查询"></a>练习 3：复杂查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 7. 查询工资最高的前 3 名员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.salary, d.dept_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> e.salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8. 查询每个部门工资最高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> e.name, e.dept_id, e.salary</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">WHERE</span> e.salary <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(e2.salary)</span><br><span class="line">    <span class="keyword">FROM</span> employees e2</span><br><span class="line">    <span class="keyword">WHERE</span> e2.dept_id <span class="operator">=</span> e.dept_id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9. 查询员工及其上级领导（自连接）</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    e.name <span class="keyword">AS</span> 员工，</span><br><span class="line">    m.name <span class="keyword">AS</span> 上级领导</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10. 查询没有下属的领导</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> m.name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> m.id</span><br><span class="line"><span class="keyword">WHERE</span> m.id <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> manager_id <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="十三、小结"><a href="#十三、小结" class="headerlink" title="十三、小结"></a>十三、小结</h2><h3 id="连接查询总结"><a href="#连接查询总结" class="headerlink" title="连接查询总结"></a>连接查询总结</h3><table>
<thead>
<tr>
<th>连接类型</th>
<th>关键字</th>
<th>返回结果</th>
</tr>
</thead>
<tbody><tr>
<td>内连接</td>
<td>INNER JOIN</td>
<td>只返回匹配记录</td>
</tr>
<tr>
<td>左连接</td>
<td>LEFT JOIN</td>
<td>左表全部 + 右表匹配</td>
</tr>
<tr>
<td>右连接</td>
<td>RIGHT JOIN</td>
<td>右表全部 + 左表匹配</td>
</tr>
<tr>
<td>自连接</td>
<td>表别名</td>
<td>表自己连接自己</td>
</tr>
<tr>
<td>交叉连接</td>
<td>CROSS JOIN</td>
<td>笛卡尔积</td>
</tr>
</tbody></table>
<h3 id="子查询总结"><a href="#子查询总结" class="headerlink" title="子查询总结"></a>子查询总结</h3><table>
<thead>
<tr>
<th>子查询类型</th>
<th>返回值</th>
<th>常用位置</th>
</tr>
</thead>
<tbody><tr>
<td>标量子查询</td>
<td>单个值</td>
<td>WHERE、SELECT</td>
</tr>
<tr>
<td>列子查询</td>
<td>单列多行</td>
<td>WHERE (IN&#x2F;NOT IN)</td>
</tr>
<tr>
<td>行子查询</td>
<td>单行多列</td>
<td>WHERE</td>
</tr>
<tr>
<td>表子查询</td>
<td>多行多列</td>
<td>FROM</td>
</tr>
</tbody></table>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ol>
<li><strong>优先使用连接</strong>：大多数子查询可以用连接改写</li>
<li><strong>EXISTS vs IN</strong>： EXISTS 通常在子查询结果集大时性能更好</li>
<li>**避免 SELECT ***：只选择需要的列</li>
<li><strong>使用表别名</strong>：简化 SQL 语句</li>
<li><strong>注意 NULL 值</strong>：NOT IN 遇到 NULL 可能返回空结果</li>
</ol>
<hr>
<p><strong>下一篇</strong>：[MySQL 进阶教程（四）：事务详解](&#x2F;2026&#x2F;02&#x2F;23&#x2F;MySQL 进阶教程（四）事务详解&#x2F;)</p>
<p><strong>上一篇</strong>：[MySQL 进阶教程（二）：数据库约束详解](&#x2F;2026&#x2F;02&#x2F;23&#x2F;MySQL 进阶教程（二）数据库约束详解&#x2F;)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io">过拟合的炸鱼薯条</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/">https://brian-lin-c.github.io/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://brian-lin-c.github.io" target="_blank">过拟合的炸鱼薯条</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/">多表查询</a><a class="post-meta__tags" href="/tags/%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2/">连接查询</a><a class="post-meta__tags" href="/tags/%E5%AD%90%E6%9F%A5%E8%AF%A2/">子查询</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（四）事务详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL 进阶教程（四）事务详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（四）事务详解事务是数据库管理的核心技术之一，用于保证数据的完整性和一致性。本文将详细讲解事务的概念、ACID 特性、并发问题以及隔离级别。 一、事务简介1.1 什么是事务？事务（Transaction） 是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。这些操作要么全部成功执行，要么全部不执行，是一个不可分割的工作单位。 1.2 事务的特点 原子性：事务是一个不可分割的操作序列 一致性：事务执行前后，数据保持一致 独立性：多个事务并发执行时互不干扰 持久性：事务一旦提交，修改永久保存  1.3 事务的使用场景   场景 说明    银行转账 A 转给 B 钱，A 扣款和 B 收款必须同时成功或失败   订单创建 创建订单、扣减库存、生成物流单必须同时成功   批量操作 批量导入数据，要么全部导入成功，要么全部回滚   数据一致性 更新多个关联表时保持一致性   1.4 不使用事务的问题12345678910-- 不使用事务的转账操作-- 步骤 1：A 账户扣款UPDATE accounts SET balance = balance ...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（二）数据库约束详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQL 进阶教程（二）数据库约束详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（二）数据库约束详解数据库约束用于保证数据的完整性、一致性和有效性。本文将详细讲解 MySQL 中的各种约束类型及其使用方法。 一、约束概述1.1 什么是约束？约束（Constraint） 是施加在数据库表上的规则，用于限制可以存储在表中的数据，确保数据的准确性和可靠性。 1.2 约束的作用 保证数据完整性：防止无效或不一致的数据 维护数据一致性：确保相关表之间的数据关系正确 提高数据质量：强制执行业务规则 减少应用层验证：在数据库层面进行数据验证  1.3 约束的分类   约束类型 关键字 说明 列级&#x2F;表级    主键约束 PRIMARY KEY 唯一标识每条记录 两者   外键约束 FOREIGN KEY 建立表与表之间的关系 表级   唯一约束 UNIQUE 列值必须唯一 两者   非空约束 NOT NULL 列值不能为空 列级   默认约束 DEFAULT 列的默认值 列级   检查约束 CHECK 满足指定条件 表级   1.4 约束的定义时机 列级约束：在定义列时指定，直接跟在列名后面 表级约束：在所有列定义完成后，在表末尾指定  二、约...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（一）常用函数详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 进阶教程（一）常用函数详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（一）常用函数详解在基础教程中，我们学习了 SQL 的基本查询和操作。本文将系统讲解 MySQL 提供的常用内置函数，包括字符串函数、数值函数、日期函数和流程函数。 一、函数概述MySQL 函数是对数据进行特定操作的预定义程序，可以简化 SQL 语句，提高开发效率。 函数的分类：  字符串函数：处理字符串数据 数值函数：处理数值数据 日期时间函数：处理日期和时间 流程函数：条件判断和流程控制 聚合函数：对一组数据进行计算（已在 DQL 章节讲解） 加密函数：数据加密和哈希 其他函数：信息函数、加锁函数等  二、字符串函数2.1 字符串连接与长度123456789101112131415-- CONCAT(s1, s2, ...)：连接字符串SELECT CONCAT(&#x27;Hello&#x27;, &#x27; &#x27;, &#x27;World&#x27;) AS result;  -- &#x27;Hello World&#x27;SELECT CONCAT(&#x27;姓名：&#x27;, name) FROM employees;-- CON...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" title="MySQL 基础教程（三）DML 数据操作语言详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（三）DML 数据操作语言详解</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（三）DML 数据操作语言详解在上一篇文章中，我们学习了如何使用 DDL 创建和管理数据库表结构。本文我们将学习 DML（Data Manipulation Language）数据操作语言，掌握如何对表中的数据进行插入、更新和删除操作。 一、DML 概述DML 用于对数据库表中的数据进行操作，主要包括：    命令 功能 特点    INSERT 插入数据 添加新记录   UPDATE 更新数据 修改现有记录   DELETE 删除数据 删除符合条件的记录   TRUNCATE 清空表 删除全部记录并重置自增   DML 的特点：  操作的是数据内容，不影响表结构 在事务中可回滚（需要关闭自动提交） 可以配合 WHERE 子句进行条件操作  二、插入数据（INSERT）2.1 基础插入语法123-- 语法INSERT INTO 表名 (列 1, 列 2, ..., 列 n)VALUES (值 1, 值 2, ..., 值 n);  2.2 插入单条记录首先创建测试表： 123456789-- 创建测试表CREATE TABLE employees (    i...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89DDL%20%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" title="MySQL 基础教程（二）DDL 数据定义语言详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（二）DDL 数据定义语言详解</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（二）DDL 数据定义语言详解在上一篇中，我们完成了 MySQL 的安装并了解了 SQL 的分类。本文我们将深入学习 DDL（Data Definition Language）数据定义语言，掌握如何创建和管理数据库与表。 一、DDL 概述DDL 用于定义和管理数据库对象，包括：  数据库操作：CREATE DATABASE、DROP DATABASE、ALTER DATABASE、USE 表操作：CREATE TABLE、ALTER TABLE、DROP TABLE、TRUNCATE、RENAME 索引操作：CREATE INDEX、DROP INDEX 视图操作：CREATE VIEW、DROP VIEW  DDL 的特点：  操作会自动提交，无法回滚 操作的是数据库结构，而非数据内容  二、数据库操作2.1 创建数据库12345678910111213-- 创建数据库（如果不存在）CREATE DATABASE IF NOT EXISTS mydb;-- 创建数据库并指定字符集CREATE DATABASE IF NOT EXISTS mydbCHARAC...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（二）数据库约束详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 进阶教程（二）数据库约束详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（二）数据库约束详解数据库约束用于保证数据的完整性、一致性和有效性。本文将详细讲解 MySQL 中的各种约束类型及其使用方法。 一、约束概述1.1 什么是约束？约束（Constraint） 是施加在数据库表上的规则，用于限制可以存储在表中的数据，确保数据的准确性和可靠性。 1.2 约束的作用 保证数据完整性：防止无效或不一致的数据 维护数据一致性：确保相关表之间的数据关系正确 提高数据质量：强制执行业务规则 减少应用层验证：在数据库层面进行数据验证  1.3 约束的分类   约束类型 关键字 说明 列级&#x2F;表级    主键约束 PRIMARY KEY 唯一标识每条记录 两者   外键约束 FOREIGN KEY 建立表与表之间的关系 表级   唯一约束 UNIQUE 列值必须唯一 两者   非空约束 NOT NULL 列值不能为空 列级   默认约束 DEFAULT 列的默认值 列级   检查约束 CHECK 满足指定条件 表级   1.4 约束的定义时机 列级约束：在定义列时指定，直接跟在列名后面 表级约束：在所有列定义完成后，在表末尾指定  二、约...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（四）事务详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 进阶教程（四）事务详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（四）事务详解事务是数据库管理的核心技术之一，用于保证数据的完整性和一致性。本文将详细讲解事务的概念、ACID 特性、并发问题以及隔离级别。 一、事务简介1.1 什么是事务？事务（Transaction） 是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成。这些操作要么全部成功执行，要么全部不执行，是一个不可分割的工作单位。 1.2 事务的特点 原子性：事务是一个不可分割的操作序列 一致性：事务执行前后，数据保持一致 独立性：多个事务并发执行时互不干扰 持久性：事务一旦提交，修改永久保存  1.3 事务的使用场景   场景 说明    银行转账 A 转给 B 钱，A 扣款和 B 收款必须同时成功或失败   订单创建 创建订单、扣减库存、生成物流单必须同时成功   批量操作 批量导入数据，要么全部导入成功，要么全部回滚   数据一致性 更新多个关联表时保持一致性   1.4 不使用事务的问题12345678910-- 不使用事务的转账操作-- 步骤 1：A 账户扣款UPDATE accounts SET balance = balance ...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="MySQL 基础教程（一）数据库基础与环境搭建"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（一）数据库基础与环境搭建</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（一）数据库基础与环境搭建欢迎来到 MySQL 基础教程系列的第一篇！在本篇文章中，我们将从零开始了解数据库的基本概念，完成 MySQL 的安装配置，并了解数据模型和 SQL 的分类。 一、数据库相关概念1.1 什么是数据库？数据库（Database） 是按照数据结构来组织、存储和管理数据的仓库。它可以持久化存储数据，并且支持高效的数据访问和管理。 简单来说，数据库就是一个电子化的文件柜，用于存储和管理数据。 1.2 什么是 DBMS？DBMS（Database Management System，数据库管理系统） 是用于创建、管理和维护数据库的软件。 常见的 DBMS 有：  MySQL：开源、轻量、流行，适合中小型项目 Oracle：功能强大、性能优异，适合大型企业 SQL Server：微软出品，与 Windows 生态集成良好 PostgreSQL：开源、功能丰富，支持复杂查询 SQLite：嵌入式数据库，适合移动端和小型应用  1.3 数据库的优势   对比项 文件系统 数据库系统    数据结构 松散，由应用程序定义 结构化，由 DBMS 统一管理...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">过拟合的炸鱼薯条</div><div class="author-info-description">好好学习，天天向上</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Brian-Lin-C"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Brian-Lin-C" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">MySQL 进阶教程（三）多表查询详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">一、多表关系介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 表与表之间的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB%EF%BC%881-1%EF%BC%89"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 一对一关系（1:1）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%EF%BC%881-N%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 一对多关系（1:N）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%EF%BC%88N-M%EF%BC%89"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4 多对多关系（N:M）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">二、多表查询概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 多表查询的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 笛卡尔积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%87%86%E5%A4%87%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 准备测试数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%88INNER-JOIN%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">三、内连接（INNER JOIN）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%86%85%E8%BF%9E%E6%8E%A5%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 内连接概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%86%85%E8%BF%9E%E6%8E%A5%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 内连接语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%86%85%E8%BF%9E%E6%8E%A5%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 内连接示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E9%9A%90%E5%BC%8F%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 隐式内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%A4%9A%E8%A1%A8%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 多表内连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88OUTER-JOIN%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">四、外连接（OUTER JOIN）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 外连接概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%B7%A6%E8%BF%9E%E6%8E%A5%EF%BC%88LEFT-JOIN%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 左连接（LEFT JOIN）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%8F%B3%E8%BF%9E%E6%8E%A5%EF%BC%88RIGHT-JOIN%EF%BC%89"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 右连接（RIGHT JOIN）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%B7%A6%E8%BF%9E%E6%8E%A5-vs-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 左连接 vs 内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%8C%B9%E9%85%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 外连接查询不匹配记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9D%A1%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.4.6.</span> <span class="toc-text">4.6 外连接条件位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%87%AA%E8%BF%9E%E6%8E%A5%EF%BC%88SELF-JOIN%EF%BC%89"><span class="toc-number">1.5.</span> <span class="toc-text">五、自连接（SELF JOIN）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%87%AA%E8%BF%9E%E6%8E%A5%E6%A6%82%E8%BF%B0"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 自连接概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%87%AA%E8%BF%9E%E6%8E%A5%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 自连接示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%B1%82%E7%BA%A7%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 层级查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E8%87%AA%E8%BF%9E%E6%8E%A5%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 自连接其他应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%EF%BC%88UNION%EF%BC%89"><span class="toc-number">1.6.</span> <span class="toc-text">六、联合查询（UNION）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-UNION-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 UNION 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-UNION-%E8%AF%AD%E6%B3%95"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 UNION 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-UNION-%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 UNION 示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-UNION-vs-OR"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4 UNION vs OR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-UNION-%E6%8E%92%E5%BA%8F%E5%92%8C%E5%88%86%E9%A1%B5"><span class="toc-number">1.6.5.</span> <span class="toc-text">6.5 UNION 排序和分页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.7.</span> <span class="toc-text">七、子查询介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 子查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 子查询基本语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.</span> <span class="toc-text">八、标量子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 标量子查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 标量子查询示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.</span> <span class="toc-text">九、列子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 列子查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-IN-NOT-IN"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 IN &#x2F; NOT IN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-ANY-SOME"><span class="toc-number">1.9.3.</span> <span class="toc-text">9.3 ANY &#x2F; SOME</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-ALL"><span class="toc-number">1.9.4.</span> <span class="toc-text">9.4 ALL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.10.</span> <span class="toc-text">十、行子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1 行子查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2 行子查询示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.</span> <span class="toc-text">十一、表子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%A6%82%E8%BF%B0"><span class="toc-number">1.11.1.</span> <span class="toc-text">11.1 表子查询概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-FROM-%E5%AD%90%E5%8F%A5%E4%B8%AD%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.2.</span> <span class="toc-text">11.2 FROM 子句中的子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88EXISTS%EF%BC%89"><span class="toc-number">1.11.3.</span> <span class="toc-text">11.3 相关子查询（EXISTS）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E7%BB%BC%E5%90%88%E7%BB%83%E4%B9%A0"><span class="toc-number">1.12.</span> <span class="toc-text">十二、多表查询综合练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-1%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.12.1.</span> <span class="toc-text">练习 1：基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-2%EF%BC%9A%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1"><span class="toc-number">1.12.2.</span> <span class="toc-text">练习 2：分组统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0-3%EF%BC%9A%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.12.3.</span> <span class="toc-text">练习 3：复杂查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">1.13.</span> <span class="toc-text">十三、小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E6%80%BB%E7%BB%93"><span class="toc-number">1.13.1.</span> <span class="toc-text">连接查询总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E6%80%BB%E7%BB%93"><span class="toc-number">1.13.2.</span> <span class="toc-text">子查询总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.13.3.</span> <span class="toc-text">最佳实践</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%94%EF%BC%89%E5%9F%BA%E7%A1%80%E7%AF%87%E6%80%BB%E7%BB%93/" title="MySQL 进阶教程（五）基础篇总结">MySQL 进阶教程（五）基础篇总结</a><time datetime="2026-02-23T11:00:00.000Z" title="发表于 2026-02-23 19:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（四）事务详解">MySQL 进阶教程（四）事务详解</a><time datetime="2026-02-23T10:00:00.000Z" title="发表于 2026-02-23 18:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（三）多表查询详解">MySQL 进阶教程（三）多表查询详解</a><time datetime="2026-02-23T09:00:00.000Z" title="发表于 2026-02-23 17:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（二）数据库约束详解">MySQL 进阶教程（二）数据库约束详解</a><time datetime="2026-02-23T08:00:00.000Z" title="发表于 2026-02-23 16:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（一）常用函数详解">MySQL 进阶教程（一）常用函数详解</a><time datetime="2026-02-23T07:00:00.000Z" title="发表于 2026-02-23 15:00:00">2026-02-23</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 过拟合的炸鱼薯条</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>