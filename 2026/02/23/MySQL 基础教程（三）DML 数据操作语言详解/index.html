<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 基础教程（三）DML 数据操作语言详解 | 过拟合的炸鱼薯条</title><meta name="author" content="过拟合的炸鱼薯条"><meta name="copyright" content="过拟合的炸鱼薯条"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL 基础教程（三）DML 数据操作语言详解在上一篇文章中，我们学习了如何使用 DDL 创建和管理数据库表结构。本文我们将学习 DML（Data Manipulation Language）数据操作语言，掌握如何对表中的数据进行插入、更新和删除操作。 一、DML 概述DML 用于对数据库表中的数据进行操作，主要包括：    命令 功能 特点    INSERT 插入数据 添加新记录   UP">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 基础教程（三）DML 数据操作语言详解">
<meta property="og:url" content="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="过拟合的炸鱼薯条">
<meta property="og:description" content="MySQL 基础教程（三）DML 数据操作语言详解在上一篇文章中，我们学习了如何使用 DDL 创建和管理数据库表结构。本文我们将学习 DML（Data Manipulation Language）数据操作语言，掌握如何对表中的数据进行插入、更新和删除操作。 一、DML 概述DML 用于对数据库表中的数据进行操作，主要包括：    命令 功能 特点    INSERT 插入数据 添加新记录   UP">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg">
<meta property="article:published_time" content="2026-02-23T04:00:00.000Z">
<meta property="article:modified_time" content="2026-02-23T03:27:26.401Z">
<meta property="article:author" content="过拟合的炸鱼薯条">
<meta property="article:tag" content="DML">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="数据操作">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 基础教程（三）DML 数据操作语言详解",
  "url": "https://brian-lin-c.github.io/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/",
  "image": "https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg",
  "datePublished": "2026-02-23T04:00:00.000Z",
  "dateModified": "2026-02-23T03:27:26.401Z",
  "author": [
    {
      "@type": "Person",
      "name": "过拟合的炸鱼薯条",
      "url": "https://brian-lin-c.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 基础教程（三）DML 数据操作语言详解',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">过拟合的炸鱼薯条</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 基础教程（三）DML 数据操作语言详解</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 基础教程（三）DML 数据操作语言详解</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-23T04:00:00.000Z" title="发表于 2026-02-23 12:00:00">2026-02-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-23T03:27:26.401Z" title="更新于 2026-02-23 11:27:26">2026-02-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/">MySQL 基础教程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MySQL-基础教程（三）DML-数据操作语言详解"><a href="#MySQL-基础教程（三）DML-数据操作语言详解" class="headerlink" title="MySQL 基础教程（三）DML 数据操作语言详解"></a>MySQL 基础教程（三）DML 数据操作语言详解</h1><p>在上一篇文章中，我们学习了如何使用 DDL 创建和管理数据库表结构。本文我们将学习 <strong>DML（Data Manipulation Language）数据操作语言</strong>，掌握如何对表中的数据进行插入、更新和删除操作。</p>
<h2 id="一、DML-概述"><a href="#一、DML-概述" class="headerlink" title="一、DML 概述"></a>一、DML 概述</h2><p>DML 用于对数据库表中的数据进行操作，主要包括：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>INSERT</td>
<td>插入数据</td>
<td>添加新记录</td>
</tr>
<tr>
<td>UPDATE</td>
<td>更新数据</td>
<td>修改现有记录</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除数据</td>
<td>删除符合条件的记录</td>
</tr>
<tr>
<td>TRUNCATE</td>
<td>清空表</td>
<td>删除全部记录并重置自增</td>
</tr>
</tbody></table>
<p><strong>DML 的特点</strong>：</p>
<ul>
<li>操作的是数据内容，不影响表结构</li>
<li>在事务中可回滚（需要关闭自动提交）</li>
<li>可以配合 WHERE 子句进行条件操作</li>
</ul>
<h2 id="二、插入数据（INSERT）"><a href="#二、插入数据（INSERT）" class="headerlink" title="二、插入数据（INSERT）"></a>二、插入数据（INSERT）</h2><h3 id="2-1-基础插入语法"><a href="#2-1-基础插入语法" class="headerlink" title="2.1 基础插入语法"></a>2.1 基础插入语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> 表名 (列 <span class="number">1</span>, 列 <span class="number">2</span>, ..., 列 n)</span><br><span class="line"><span class="keyword">VALUES</span> (值 <span class="number">1</span>, 值 <span class="number">2</span>, ..., 值 n);</span><br></pre></td></tr></table></figure>

<h3 id="2-2-插入单条记录"><a href="#2-2-插入单条记录" class="headerlink" title="2.2 插入单条记录"></a>2.2 插入单条记录</h3><p>首先创建测试表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建测试表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    dept <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    hire_date <span class="type">DATE</span>,</span><br><span class="line">    status TINYINT <span class="keyword">DEFAULT</span> <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：指定列名插入（推荐）</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary, hire_date)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">8000.00</span>, <span class="string">&#x27;2024-01-15&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：不指定列名（必须为所有列提供值）</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">7500.00</span>, <span class="string">&#x27;2024-02-01&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式三：利用默认值</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;人事部&#x27;</span>, <span class="number">6500.00</span>);</span><br><span class="line"><span class="comment">-- hire_date 为 NULL，status 为默认值 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式四：设置 NULL 值</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary, hire_date, status)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;赵六&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">5000.00</span>, <span class="keyword">NULL</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong>：</p>
<ol>
<li>字符串和日期类型需要用引号包裹</li>
<li>插入的值必须与列的数据类型兼容</li>
<li>NOT NULL 约束的列必须提供值（除非有 DEFAULT）</li>
<li>主键列如果是自增，可以传入 NULL 或 DEFAULT 让系统自动生成</li>
</ol>
<h3 id="2-3-批量插入"><a href="#2-3-批量插入" class="headerlink" title="2.3 批量插入"></a>2.3 批量插入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一次插入多条记录（推荐，效率高）</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary, hire_date) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;孙七&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">9000.00</span>, <span class="string">&#x27;2023-06-01&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;周八&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">9500.00</span>, <span class="string">&#x27;2023-03-15&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;吴九&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">7000.00</span>, <span class="string">&#x27;2024-01-10&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;郑十&#x27;</span>, <span class="string">&#x27;财务部&#x27;</span>, <span class="number">8500.00</span>, <span class="string">&#x27;2023-09-01&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;王十一&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">7200.00</span>, <span class="string">&#x27;2023-12-01&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 验证插入结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-插入时处理重复"><a href="#2-4-插入时处理重复" class="headerlink" title="2.4 插入时处理重复"></a>2.4 插入时处理重复</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建带唯一约束的表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> users (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT NULL</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    password <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (username, email, password) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;user1&#x27;</span>, <span class="string">&#x27;user1@example.com&#x27;</span>, <span class="string">&#x27;pwd123&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;user2&#x27;</span>, <span class="string">&#x27;user2@example.com&#x27;</span>, <span class="string">&#x27;pwd456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：INSERT IGNORE（忽略重复）</span></span><br><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> users (username, email, password)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;user1&#x27;</span>, <span class="string">&#x27;new@example.com&#x27;</span>, <span class="string">&#x27;newpwd&#x27;</span>);</span><br><span class="line"><span class="comment">-- user1 已存在，该条语句被忽略，不会报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：ON DUPLICATE KEY UPDATE（重复则更新）</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (username, email, password)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;user1&#x27;</span>, <span class="string">&#x27;updated@example.com&#x27;</span>, <span class="string">&#x27;newpwd123&#x27;</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span></span><br><span class="line">    email <span class="operator">=</span> <span class="keyword">VALUES</span>(email),</span><br><span class="line">    password <span class="operator">=</span> <span class="keyword">VALUES</span>(password);</span><br><span class="line"><span class="comment">-- 如果 user1 存在，则更新 email 和 password</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式三：REPLACE INTO（删除后重新插入）</span></span><br><span class="line">REPLACE <span class="keyword">INTO</span> users (username, email, password)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;user1&#x27;</span>, <span class="string">&#x27;replaced@example.com&#x27;</span>, <span class="string">&#x27;replacepwd&#x27;</span>);</span><br><span class="line"><span class="comment">-- 如果存在则先删除再插入，id 会变化</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-从其他表插入数据"><a href="#2-5-从其他表插入数据" class="headerlink" title="2.5 从其他表插入数据"></a>2.5 从其他表插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建员工备份表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees_backup <span class="keyword">LIKE</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式一：INSERT ... SELECT</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees_backup (id, name, dept, salary, hire_date, status)</span><br><span class="line"><span class="keyword">SELECT</span> id, name, dept, salary, hire_date, status <span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：CREATE TABLE ... AS SELECT（创建并插入）</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees_copy <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-INSERT-性能优化技巧"><a href="#2-6-INSERT-性能优化技巧" class="headerlink" title="2.6 INSERT 性能优化技巧"></a>2.6 INSERT 性能优化技巧</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 技巧 1：使用批量插入（比单条插入快得多）</span></span><br><span class="line"><span class="comment">-- 慢：</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span> (<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span> (<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span> (<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 快：</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>), (<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>), (<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 技巧 2：对于大量数据，可以先禁用索引再插入</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> employees DISABLE KEYS;</span><br><span class="line"><span class="comment">-- 执行批量插入</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> employees ENABLE KEYS;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 技巧 3：使用事务包装（减少自动提交）</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 多条 INSERT 语句</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<h2 id="三、更新数据（UPDATE）"><a href="#三、更新数据（UPDATE）" class="headerlink" title="三、更新数据（UPDATE）"></a>三、更新数据（UPDATE）</h2><h3 id="3-1-基础更新语法"><a href="#3-1-基础更新语法" class="headerlink" title="3.1 基础更新语法"></a>3.1 基础更新语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">UPDATE</span> 表名</span><br><span class="line"><span class="keyword">SET</span> 列 <span class="number">1</span> <span class="operator">=</span> 值 <span class="number">1</span>, 列 <span class="number">2</span> <span class="operator">=</span> 值 <span class="number">2</span>, ...</span><br><span class="line">[<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure>

<h3 id="3-2-更新指定记录"><a href="#3-2-更新指定记录" class="headerlink" title="3.2 更新指定记录"></a>3.2 更新指定记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 更新单条记录</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">8500.00</span></span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新多列</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">9000.00</span>, dept <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 基于现有值更新</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">*</span> <span class="number">1.1</span>  <span class="comment">-- 加薪 10%</span></span><br><span class="line"><span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新满足条件的多条记录</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> status <span class="operator">=</span> <span class="number">0</span>  <span class="comment">-- 设为离职状态</span></span><br><span class="line"><span class="keyword">WHERE</span> hire_date <span class="operator">&lt;</span> <span class="string">&#x27;2023-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>重要提醒</strong>：</p>
<blockquote>
<p>⚠️ <strong>UPDATE 语句一定要加 WHERE 子句！</strong> 否则整张表的所有记录都会被更新！</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 危险操作！会更新所有记录！</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">5000</span>;  <span class="comment">-- 所有人的工资都变成 5000！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 补救措施（如果开启了事务）</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-更新时使用表达式"><a href="#3-3-更新时使用表达式" class="headerlink" title="3.3 更新时使用表达式"></a>3.3 更新时使用表达式</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用计算表达式</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">+</span> <span class="number">500</span>  <span class="comment">-- 每人加薪 500</span></span><br><span class="line"><span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用函数</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> name <span class="operator">=</span> <span class="built_in">UPPER</span>(name)  <span class="comment">-- 姓名转大写</span></span><br><span class="line"><span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用日期函数</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> hire_date <span class="operator">=</span> DATE_SUB(hire_date, <span class="type">INTERVAL</span> <span class="number">1</span> <span class="keyword">YEAR</span>)</span><br><span class="line"><span class="keyword">WHERE</span> id <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-多表更新"><a href="#3-4-多表更新" class="headerlink" title="3.4 多表更新"></a>3.4 多表更新</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> departments (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    dept_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    budget <span class="type">DECIMAL</span>(<span class="number">12</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> departments (dept_name, budget) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;技术部&#x27;</span>, <span class="number">1000000</span>),</span><br><span class="line">(<span class="string">&#x27;市场部&#x27;</span>, <span class="number">500000</span>),</span><br><span class="line">(<span class="string">&#x27;财务部&#x27;</span>, <span class="number">300000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改 employees 表，添加 dept_id</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> employees <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> dept_id <span class="type">INT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多表关联更新</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept <span class="operator">=</span> d.dept_name</span><br><span class="line"><span class="keyword">SET</span> e.dept_id <span class="operator">=</span> d.id;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-更新-LIMIT"><a href="#3-5-更新-LIMIT" class="headerlink" title="3.5 更新 LIMIT"></a>3.5 更新 LIMIT</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 只更新前 N 条记录</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">+</span> <span class="number">100</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">ASC</span></span><br><span class="line">LIMIT <span class="number">5</span>;  <span class="comment">-- 工资最低的 5 个人加薪 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结合 WHERE 和 LIMIT</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> status <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span></span><br><span class="line">LIMIT <span class="number">1</span>;  <span class="comment">-- 只更新 1 条市场部员工</span></span><br></pre></td></tr></table></figure>

<h2 id="四、删除数据（DELETE）"><a href="#四、删除数据（DELETE）" class="headerlink" title="四、删除数据（DELETE）"></a>四、删除数据（DELETE）</h2><h3 id="4-1-基础删除语法"><a href="#4-1-基础删除语法" class="headerlink" title="4.1 基础删除语法"></a>4.1 基础删除语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure>

<h3 id="4-2-删除指定记录"><a href="#4-2-删除指定记录" class="headerlink" title="4.2 删除指定记录"></a>4.2 删除指定记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除单条记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除多条记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用 IN 删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用条件删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="number">6000</span> <span class="keyword">AND</span> status <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p><strong>重要提醒</strong>：</p>
<blockquote>
<p>⚠️ <strong>DELETE 语句一定要加 WHERE 子句！</strong> 否则会删除整张表的所有数据！</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 危险操作！会删除所有记录！</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees;  <span class="comment">-- 表清空！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果误操作且开启了事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-删除-LIMIT"><a href="#4-3-删除-LIMIT" class="headerlink" title="4.3 删除 LIMIT"></a>4.3 删除 LIMIT</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除前 N 条符合条件的记录</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">LIMIT <span class="number">3</span>;  <span class="comment">-- 只删除 3 条离职员工</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 配合 ORDER BY</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;  <span class="comment">-- 删除市场部工资最高的 1 人</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-多表删除"><a href="#4-4-多表删除" class="headerlink" title="4.4 多表删除"></a>4.4 多表删除</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除主表记录时级联删除子表</span></span><br><span class="line"><span class="keyword">DELETE</span> e <span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.dept_name <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除不存在的关联记录（左连接删除）</span></span><br><span class="line"><span class="keyword">DELETE</span> e <span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.dept_id <span class="operator">=</span> d.id</span><br><span class="line"><span class="keyword">WHERE</span> d.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;  <span class="comment">-- 删除没有对应部门的员工</span></span><br></pre></td></tr></table></figure>

<h2 id="五、DELETE-vs-TRUNCATE-vs-DROP"><a href="#五、DELETE-vs-TRUNCATE-vs-DROP" class="headerlink" title="五、DELETE vs TRUNCATE vs DROP"></a>五、DELETE vs TRUNCATE vs DROP</h2><p>这三个命令都可以删除数据，但有本质区别：</p>
<table>
<thead>
<tr>
<th>对比项</th>
<th>DELETE</th>
<th>TRUNCATE</th>
<th>DROP</th>
</tr>
</thead>
<tbody><tr>
<td><strong>类型</strong></td>
<td>DML</td>
<td>DDL</td>
<td>DDL</td>
</tr>
<tr>
<td><strong>功能</strong></td>
<td>删除符合条件的行</td>
<td>清空整张表</td>
<td>删除整个表（结构和数据）</td>
</tr>
<tr>
<td><strong>WHERE 条件</strong></td>
<td>支持</td>
<td>不支持</td>
<td>不适用</td>
</tr>
<tr>
<td><strong>返回值</strong></td>
<td>删除的行数</td>
<td>无</td>
<td>无</td>
</tr>
<tr>
<td><strong>自增列重置</strong></td>
<td>否</td>
<td>是</td>
<td>不适用</td>
</tr>
<tr>
<td><strong>事务回滚</strong></td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
</tr>
<tr>
<td><strong>触发器</strong></td>
<td>触发</td>
<td>不触发</td>
<td>不适用</td>
</tr>
<tr>
<td><strong>外键约束</strong></td>
<td>检查</td>
<td>检查</td>
<td>检查</td>
</tr>
<tr>
<td><strong>执行速度</strong></td>
<td>慢</td>
<td>快</td>
<td>快</td>
</tr>
<tr>
<td><strong>空间释放</strong></td>
<td>不释放</td>
<td>释放</td>
<td>释放</td>
</tr>
</tbody></table>
<h3 id="使用示例对比"><a href="#使用示例对比" class="headerlink" title="使用示例对比"></a>使用示例对比</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- DELETE：删除工资低于 7000 的员工</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="number">7000</span>;</span><br><span class="line"><span class="comment">-- 自增 id 不会重置，下一个 id 继续递增</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- TRUNCATE：清空所有员工</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> employees;</span><br><span class="line"><span class="comment">-- 自增 id 重置为 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- DROP：删除整个员工表（表结构也没了）</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> employees;</span><br><span class="line"><span class="comment">-- 再次查询会报错：Table doesn&#x27;t exist</span></span><br></pre></td></tr></table></figure>

<h2 id="六、DML-与事务"><a href="#六、DML-与事务" class="headerlink" title="六、DML 与事务"></a>六、DML 与事务</h2><h3 id="6-1-事务基础"><a href="#6-1-事务基础" class="headerlink" title="6.1 事务基础"></a>6.1 事务基础</h3><p>事务是一组原子性的 SQL 操作，要么全部成功，要么全部失败。</p>
<p><strong>事务的 ACID 特性</strong>：</p>
<ul>
<li><strong>原子性（Atomicity）</strong>：事务是不可分割的最小单位</li>
<li><strong>一致性（Consistency）</strong>：事务执行前后数据保持一致</li>
<li><strong>隔离性（Isolation）</strong>：并发事务互不干扰</li>
<li><strong>持久性（Durability）</strong>：事务提交后永久保存</li>
</ul>
<h3 id="6-2-事务操作"><a href="#6-2-事务操作" class="headerlink" title="6.2 事务操作"></a>6.2 事务操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看自动提交状态</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关闭自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开始事务</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 执行 DML 操作</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">+</span> <span class="number">500</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">-</span> <span class="number">500</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务（使更改永久生效）</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚事务（撤销所有更改）</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置保存点</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">8000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> sp1;</span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">9000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 回滚到保存点</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> sp1;  <span class="comment">-- id=2 的更新被撤销，id=1 的更新保留</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-实战案例：转账操作"><a href="#6-3-实战案例：转账操作" class="headerlink" title="6.3 实战案例：转账操作"></a>6.3 实战案例：转账操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建账户表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> accounts (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    account_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    balance <span class="type">DECIMAL</span>(<span class="number">12</span>, <span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> accounts (account_name, balance) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;张三&#x27;</span>, <span class="number">10000</span>),</span><br><span class="line">(<span class="string">&#x27;李四&#x27;</span>, <span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三给李四转账 1000 元（使用事务保证原子性）</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户减 1000</span></span><br><span class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">1000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账户加 1000</span></span><br><span class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">1000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 检查是否有异常（实际应用中的业务逻辑）</span></span><br><span class="line"><span class="comment">-- 这里可以添加余额检查等逻辑</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果中间出现错误</span></span><br><span class="line"><span class="comment">-- ROLLBACK;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> accounts;</span><br></pre></td></tr></table></figure>

<h2 id="七、DML-实战练习"><a href="#七、DML-实战练习" class="headerlink" title="七、DML 实战练习"></a>七、DML 实战练习</h2><h3 id="7-1-员工管理系统练习"><a href="#7-1-员工管理系统练习" class="headerlink" title="7.1 员工管理系统练习"></a>7.1 员工管理系统练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 初始化数据</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">    dept <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    salary <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    hire_date <span class="type">DATE</span>,</span><br><span class="line">    status TINYINT <span class="keyword">DEFAULT</span> <span class="number">1</span> COMMENT <span class="string">&#x27;1 在职 0 离职&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary, hire_date, status) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">8000</span>, <span class="string">&#x27;2023-01-15&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">9000</span>, <span class="string">&#x27;2022-06-01&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">7500</span>, <span class="string">&#x27;2023-03-20&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;赵六&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">7000</span>, <span class="string">&#x27;2023-06-10&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;孙七&#x27;</span>, <span class="string">&#x27;财务部&#x27;</span>, <span class="number">8500</span>, <span class="string">&#x27;2022-09-01&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;周八&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">9500</span>, <span class="string">&#x27;2021-12-01&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;吴九&#x27;</span>, <span class="string">&#x27;人事部&#x27;</span>, <span class="number">6500</span>, <span class="string">&#x27;2023-07-01&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;郑十&#x27;</span>, <span class="string">&#x27;财务部&#x27;</span>, <span class="number">8000</span>, <span class="string">&#x27;2023-02-15&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 1：技术部所有员工加薪 500 元</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">+</span> <span class="number">500</span> <span class="keyword">WHERE</span> dept <span class="operator">=</span> <span class="string">&#x27;技术部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 2：插入一批新员工</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept, salary, hire_date) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;刘备&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>, <span class="number">12000</span>, <span class="string">&#x27;2024-01-02&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;关羽&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">11000</span>, <span class="string">&#x27;2024-01-02&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;张飞&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>, <span class="number">10000</span>, <span class="string">&#x27;2024-01-02&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 3：删除所有离职员工（status=0）</span></span><br><span class="line"><span class="comment">-- 先模拟一些离职员工</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> status <span class="operator">=</span> <span class="number">0</span> <span class="keyword">WHERE</span> name <span class="keyword">IN</span> (<span class="string">&#x27;吴九&#x27;</span>, <span class="string">&#x27;郑十&#x27;</span>);</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 4：将市场部和财务部的工资统一上调 8%</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees</span><br><span class="line"><span class="keyword">SET</span> salary <span class="operator">=</span> salary <span class="operator">*</span> <span class="number">1.08</span></span><br><span class="line"><span class="keyword">WHERE</span> dept <span class="keyword">IN</span> (<span class="string">&#x27;市场部&#x27;</span>, <span class="string">&#x27;财务部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 5：查询最终结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">ORDER</span> <span class="keyword">BY</span> dept, salary <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-订单系统练习"><a href="#7-2-订单系统练习" class="headerlink" title="7.2 订单系统练习"></a>7.2 订单系统练习</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建订单表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> orders (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    order_no <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    customer_name <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    status <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;PENDING&#x27;</span>,</span><br><span class="line">    create_time DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入订单数据</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (order_no, customer_name, amount, status) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;ORD001&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="number">199.00</span>, <span class="string">&#x27;PENDING&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;ORD002&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="number">299.00</span>, <span class="string">&#x27;PAID&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;ORD003&#x27;</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="number">399.00</span>, <span class="string">&#x27;PENDING&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;ORD004&#x27;</span>, <span class="string">&#x27;赵六&#x27;</span>, <span class="number">499.00</span>, <span class="string">&#x27;SHIPPED&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;ORD005&#x27;</span>, <span class="string">&#x27;孙七&#x27;</span>, <span class="number">599.00</span>, <span class="string">&#x27;PENDING&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 1：将所有 PENDING 状态的订单改为 PAID</span></span><br><span class="line"><span class="keyword">UPDATE</span> orders <span class="keyword">SET</span> status <span class="operator">=</span> <span class="string">&#x27;PAID&#x27;</span> <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="string">&#x27;PENDING&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 2：删除金额低于 300 的订单</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> amount <span class="operator">&lt;</span> <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 3：批量插入新订单</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (order_no, customer_name, amount) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;ORD006&#x27;</span>, <span class="string">&#x27;周八&#x27;</span>, <span class="number">699.00</span>),</span><br><span class="line">(<span class="string">&#x27;ORD007&#x27;</span>, <span class="string">&#x27;吴九&#x27;</span>, <span class="number">799.00</span>),</span><br><span class="line">(<span class="string">&#x27;ORD008&#x27;</span>, <span class="string">&#x27;郑十&#x27;</span>, <span class="number">899.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 练习 4：给所有订单打 9 折促销</span></span><br><span class="line"><span class="keyword">UPDATE</span> orders <span class="keyword">SET</span> amount <span class="operator">=</span> amount <span class="operator">*</span> <span class="number">0.9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure>

<h2 id="八、DML-性能优化建议"><a href="#八、DML-性能优化建议" class="headerlink" title="八、DML 性能优化建议"></a>八、DML 性能优化建议</h2><h3 id="8-1-INSERT-优化"><a href="#8-1-INSERT-优化" class="headerlink" title="8.1 INSERT 优化"></a>8.1 INSERT 优化</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 批量插入优于单条插入</span></span><br><span class="line"><span class="comment">-- 慢</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span> (<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span> (<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 快</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> employees (name, dept) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>), (<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;技术部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 对于大量数据，禁用索引后插入再重建</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> employees DISABLE KEYS;</span><br><span class="line"><span class="comment">-- 批量插入...</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> employees ENABLE KEYS;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 使用 LOAD DATA 导入文本文件（最快）</span></span><br><span class="line">LOAD DATA <span class="keyword">LOCAL</span> INFILE <span class="string">&#x27;/path/to/data.csv&#x27;</span></span><br><span class="line"><span class="keyword">INTO</span> <span class="keyword">TABLE</span> employees</span><br><span class="line">FIELDS TERMINATED <span class="keyword">BY</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">LINES TERMINATED <span class="keyword">BY</span> <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">(name, dept, salary);</span><br></pre></td></tr></table></figure>

<h3 id="8-2-UPDATE-优化"><a href="#8-2-UPDATE-优化" class="headerlink" title="8.2 UPDATE 优化"></a>8.2 UPDATE 优化</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. WHERE 条件使用索引列</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> salary <span class="operator">=</span> <span class="number">8000</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">-- id 是主键，有索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 避免更新不必要的列</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> name <span class="operator">=</span> <span class="string">&#x27;新名字&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">-- 只更新需要的列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 分批更新大表</span></span><br><span class="line"><span class="keyword">UPDATE</span> employees <span class="keyword">SET</span> status <span class="operator">=</span> <span class="number">0</span> <span class="keyword">WHERE</span> create_time <span class="operator">&lt;</span> <span class="string">&#x27;2023-01-01&#x27;</span> LIMIT <span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 多次执行直到影响行数为 0</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3-DELETE-优化"><a href="#8-3-DELETE-优化" class="headerlink" title="8.3 DELETE 优化"></a>8.3 DELETE 优化</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 分批删除大表</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> logs <span class="keyword">WHERE</span> create_time <span class="operator">&lt;</span> <span class="string">&#x27;2023-01-01&#x27;</span> LIMIT <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 对于清空表，使用 TRUNCATE 代替 DELETE</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> logs;  <span class="comment">-- 比 DELETE 快得多</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 删除前备份重要数据</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> employees_backup <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> status <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<h2 id="九、小结"><a href="#九、小结" class="headerlink" title="九、小结"></a>九、小结</h2><h3 id="知识点回顾"><a href="#知识点回顾" class="headerlink" title="知识点回顾"></a>知识点回顾</h3><ol>
<li><p><strong>INSERT 插入</strong></p>
<ul>
<li>单条插入、批量插入</li>
<li>INSERT IGNORE、ON DUPLICATE KEY UPDATE、REPLACE INTO</li>
<li>INSERT INTO … SELECT</li>
</ul>
</li>
<li><p><strong>UPDATE 更新</strong></p>
<ul>
<li>基础更新、表达式更新、多表更新</li>
<li>必须使用 WHERE 条件避免误更新</li>
</ul>
</li>
<li><p><strong>DELETE 删除</strong></p>
<ul>
<li>条件删除、LIMIT 删除、多表删除</li>
<li>DELETE vs TRUNCATE vs DROP 的区别</li>
</ul>
</li>
<li><p><strong>事务控制</strong></p>
<ul>
<li>START TRANSACTION、COMMIT、ROLLBACK</li>
<li>保存点 SAVEPOINT</li>
</ul>
</li>
</ol>
<h3 id="DML-命令速查表"><a href="#DML-命令速查表" class="headerlink" title="DML 命令速查表"></a>DML 命令速查表</h3><table>
<thead>
<tr>
<th>命令</th>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>INSERT</td>
<td><code>INSERT INTO 表 (列) VALUES (值)</code></td>
<td>插入数据</td>
</tr>
<tr>
<td>UPDATE</td>
<td><code>UPDATE 表 SET 列=值 WHERE 条件</code></td>
<td>更新数据</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>DELETE FROM 表 WHERE 条件</code></td>
<td>删除数据</td>
</tr>
<tr>
<td>TRUNCATE</td>
<td><code>TRUNCATE TABLE 表</code></td>
<td>清空表</td>
</tr>
</tbody></table>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>⚠️ <strong>执行 DML 操作前务必</strong>：</p>
<ol>
<li>开启事务或确保可以回滚</li>
<li>先用 SELECT 验证 WHERE 条件是否正确</li>
<li>对重要数据进行备份</li>
<li>谨慎执行不带 WHERE 的 UPDATE&#x2F;DELETE</li>
</ol>
<hr>
<p><strong>下一篇</strong>：[MySQL 基础教程（四）：DQL 数据查询语言详解](&#x2F;2026&#x2F;02&#x2F;23&#x2F;MySQL 基础教程（四）DQL 数据查询语言详解&#x2F;)</p>
<p><strong>上一篇</strong>：[MySQL 基础教程（二）：DDL 数据定义语言详解](&#x2F;2026&#x2F;02&#x2F;23&#x2F;MySQL 基础教程（二）DDL 数据定义语言详解&#x2F;)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io">过拟合的炸鱼薯条</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/">https://brian-lin-c.github.io/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML%20%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://brian-lin-c.github.io" target="_blank">过拟合的炸鱼薯条</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/DML/">DML</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/">数据操作</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89DQL%20%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%8A%EF%BC%89/" title="MySQL 基础教程（四）DQL 数据查询语言详解（上）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL 基础教程（四）DQL 数据查询语言详解（上）</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（四）DQL 数据查询语言详解（上）DQL（Data Query Language，数据查询语言）是 SQL 中使用频率最高的部分。本文将系统讲解 DQL 的各种查询技巧，由于内容较多，分为上下两部分。 上半部分：基础查询、条件查询、聚合函数、分组查询下半部分：排序查询、分页查询、综合案例、执行顺序 一、DQL 概述DQL 主要用于从数据库中查询数据，核心命令是 SELECT。 完整的 SELECT 语法结构： 1234567SELECT [DISTINCT] 列名 1 [AS 别名 1], 列名 2 [AS 别名 2], ...FROM 表名 1 [AS 别名 1][INNER | LEFT | RIGHT | FULL] JOIN 表名 2 ON 连接条件[WHERE 条件][GROUP BY 分组列 [HAVING 分组过滤]][ORDER BY 排序列 [ASC | DESC]][LIMIT 起始位置，返回条数];  二、基础查询2.1 准备测试数据1234567891011121314151617181920212223242526272829303...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89DDL%20%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" title="MySQL 基础教程（二）DDL 数据定义语言详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQL 基础教程（二）DDL 数据定义语言详解</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（二）DDL 数据定义语言详解在上一篇中，我们完成了 MySQL 的安装并了解了 SQL 的分类。本文我们将深入学习 DDL（Data Definition Language）数据定义语言，掌握如何创建和管理数据库与表。 一、DDL 概述DDL 用于定义和管理数据库对象，包括：  数据库操作：CREATE DATABASE、DROP DATABASE、ALTER DATABASE、USE 表操作：CREATE TABLE、ALTER TABLE、DROP TABLE、TRUNCATE、RENAME 索引操作：CREATE INDEX、DROP INDEX 视图操作：CREATE VIEW、DROP VIEW  DDL 的特点：  操作会自动提交，无法回滚 操作的是数据库结构，而非数据内容  二、数据库操作2.1 创建数据库12345678910111213-- 创建数据库（如果不存在）CREATE DATABASE IF NOT EXISTS mydb;-- 创建数据库并指定字符集CREATE DATABASE IF NOT EXISTS mydbCHARAC...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%94%EF%BC%89DCL%20%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" title="MySQL 基础教程（五）DCL 数据控制语言详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（五）DCL 数据控制语言详解</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（五）DCL 数据控制语言详解DCL（Data Control Language，数据控制语言）用于管理数据库权限和事务控制。本文我们将学习如何创建用户、管理权限，以及事务控制的相关知识。 一、DCL 概述DCL 主要包含两类操作：  权限管理：GRANT（授权）、REVOKE（撤销权限） 事务控制：COMMIT（提交）、ROLLBACK（回滚）、SAVEPOINT（保存点）     命令 功能 分类    GRANT 授予用户权限 权限管理   REVOKE 撤销用户权限 权限管理   COMMIT 提交事务 事务控制   ROLLBACK 回滚事务 事务控制   SAVEPOINT 设置保存点 事务控制   二、用户管理2.1 用户表结构MySQL 的用户信息存储在 mysql.user 表中： 12345-- 查看所有用户SELECT user, host FROM mysql.user;-- 查看用户详细信息SELECT user, host, authentication_string, plugin FROM mysql.user;  用户名的组成...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89DQL%20%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%8B%EF%BC%89/" title="MySQL 基础教程（四）DQL 数据查询语言详解（下）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（四）DQL 数据查询语言详解（下）</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（四）DQL 数据查询语言详解（下）承接上文，本文继续讲解 DQL 的排序查询、分页查询、综合案例以及 SQL 执行顺序。 七、排序查询（ORDER BY）ORDER BY 用于对查询结果进行排序。 7.1 基础排序1234567891011-- 升序排序（ASC，默认）SELECT name, salary FROM employeesORDER BY salary ASC;-- 降序排序（DESC）SELECT name, salary FROM employeesORDER BY salary DESC;-- 按字符串排序SELECT name FROM employeesORDER BY name ASC;  -- 按拼音排序  7.2 多列排序123456789-- 先按部门排序，部门相同按工资降序SELECT name, dept_id, salaryFROM employeesORDER BY dept_id ASC, salary DESC;-- 先按在职状态排序，再按工资降序SELECT name, status, salaryFROM em...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89DQL%20%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3%EF%BC%88%E4%B8%8A%EF%BC%89/" title="MySQL 基础教程（四）DQL 数据查询语言详解（上）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（四）DQL 数据查询语言详解（上）</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（四）DQL 数据查询语言详解（上）DQL（Data Query Language，数据查询语言）是 SQL 中使用频率最高的部分。本文将系统讲解 DQL 的各种查询技巧，由于内容较多，分为上下两部分。 上半部分：基础查询、条件查询、聚合函数、分组查询下半部分：排序查询、分页查询、综合案例、执行顺序 一、DQL 概述DQL 主要用于从数据库中查询数据，核心命令是 SELECT。 完整的 SELECT 语法结构： 1234567SELECT [DISTINCT] 列名 1 [AS 别名 1], 列名 2 [AS 别名 2], ...FROM 表名 1 [AS 别名 1][INNER | LEFT | RIGHT | FULL] JOIN 表名 2 ON 连接条件[WHERE 条件][GROUP BY 分组列 [HAVING 分组过滤]][ORDER BY 排序列 [ASC | DESC]][LIMIT 起始位置，返回条数];  二、基础查询2.1 准备测试数据1234567891011121314151617181920212223242526272829303...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（一）常用函数详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 进阶教程（一）常用函数详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（一）常用函数详解在基础教程中，我们学习了 SQL 的基本查询和操作。本文将系统讲解 MySQL 提供的常用内置函数，包括字符串函数、数值函数、日期函数和流程函数。 一、函数概述MySQL 函数是对数据进行特定操作的预定义程序，可以简化 SQL 语句，提高开发效率。 函数的分类：  字符串函数：处理字符串数据 数值函数：处理数值数据 日期时间函数：处理日期和时间 流程函数：条件判断和流程控制 聚合函数：对一组数据进行计算（已在 DQL 章节讲解） 加密函数：数据加密和哈希 其他函数：信息函数、加锁函数等  二、字符串函数2.1 字符串连接与长度123456789101112131415-- CONCAT(s1, s2, ...)：连接字符串SELECT CONCAT(&#x27;Hello&#x27;, &#x27; &#x27;, &#x27;World&#x27;) AS result;  -- &#x27;Hello World&#x27;SELECT CONCAT(&#x27;姓名：&#x27;, name) FROM employees;-- CON...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（二）数据库约束详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 进阶教程（二）数据库约束详解</div></div><div class="info-2"><div class="info-item-1">MySQL 进阶教程（二）数据库约束详解数据库约束用于保证数据的完整性、一致性和有效性。本文将详细讲解 MySQL 中的各种约束类型及其使用方法。 一、约束概述1.1 什么是约束？约束（Constraint） 是施加在数据库表上的规则，用于限制可以存储在表中的数据，确保数据的准确性和可靠性。 1.2 约束的作用 保证数据完整性：防止无效或不一致的数据 维护数据一致性：确保相关表之间的数据关系正确 提高数据质量：强制执行业务规则 减少应用层验证：在数据库层面进行数据验证  1.3 约束的分类   约束类型 关键字 说明 列级&#x2F;表级    主键约束 PRIMARY KEY 唯一标识每条记录 两者   外键约束 FOREIGN KEY 建立表与表之间的关系 表级   唯一约束 UNIQUE 列值必须唯一 两者   非空约束 NOT NULL 列值不能为空 列级   默认约束 DEFAULT 列的默认值 列级   检查约束 CHECK 满足指定条件 表级   1.4 约束的定义时机 列级约束：在定义列时指定，直接跟在列名后面 表级约束：在所有列定义完成后，在表末尾指定  二、约...</div></div></div></a><a class="pagination-related" href="/2026/02/23/MySQL%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89DDL%20%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" title="MySQL 基础教程（二）DDL 数据定义语言详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-23</div><div class="info-item-2">MySQL 基础教程（二）DDL 数据定义语言详解</div></div><div class="info-2"><div class="info-item-1">MySQL 基础教程（二）DDL 数据定义语言详解在上一篇中，我们完成了 MySQL 的安装并了解了 SQL 的分类。本文我们将深入学习 DDL（Data Definition Language）数据定义语言，掌握如何创建和管理数据库与表。 一、DDL 概述DDL 用于定义和管理数据库对象，包括：  数据库操作：CREATE DATABASE、DROP DATABASE、ALTER DATABASE、USE 表操作：CREATE TABLE、ALTER TABLE、DROP TABLE、TRUNCATE、RENAME 索引操作：CREATE INDEX、DROP INDEX 视图操作：CREATE VIEW、DROP VIEW  DDL 的特点：  操作会自动提交，无法回滚 操作的是数据库结构，而非数据内容  二、数据库操作2.1 创建数据库12345678910111213-- 创建数据库（如果不存在）CREATE DATABASE IF NOT EXISTS mydb;-- 创建数据库并指定字符集CREATE DATABASE IF NOT EXISTS mydbCHARAC...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">过拟合的炸鱼薯条</div><div class="author-info-description">好好学习，天天向上</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Brian-Lin-C"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Brian-Lin-C" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89DML-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">MySQL 基础教程（三）DML 数据操作语言详解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81DML-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">一、DML 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%88INSERT%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">二、插入数据（INSERT）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%9F%BA%E7%A1%80%E6%8F%92%E5%85%A5%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 基础插入语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%8F%92%E5%85%A5%E5%8D%95%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 插入单条记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 批量插入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%8F%92%E5%85%A5%E6%97%B6%E5%A4%84%E7%90%86%E9%87%8D%E5%A4%8D"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 插入时处理重复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E4%BB%8E%E5%85%B6%E4%BB%96%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 从其他表插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-INSERT-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6 INSERT 性能优化技巧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%EF%BC%88UPDATE%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">三、更新数据（UPDATE）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%9F%BA%E7%A1%80%E6%9B%B4%E6%96%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 基础更新语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%9B%B4%E6%96%B0%E6%8C%87%E5%AE%9A%E8%AE%B0%E5%BD%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 更新指定记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%9B%B4%E6%96%B0%E6%97%B6%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 更新时使用表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%A4%9A%E8%A1%A8%E6%9B%B4%E6%96%B0"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 多表更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%9B%B4%E6%96%B0-LIMIT"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 更新 LIMIT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%88DELETE%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">四、删除数据（DELETE）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%9F%BA%E7%A1%80%E5%88%A0%E9%99%A4%E8%AF%AD%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 基础删除语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E8%AE%B0%E5%BD%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 删除指定记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%88%A0%E9%99%A4-LIMIT"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 删除 LIMIT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%A4%9A%E8%A1%A8%E5%88%A0%E9%99%A4"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 多表删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81DELETE-vs-TRUNCATE-vs-DROP"><span class="toc-number">1.5.</span> <span class="toc-text">五、DELETE vs TRUNCATE vs DROP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E5%AF%B9%E6%AF%94"><span class="toc-number">1.5.1.</span> <span class="toc-text">使用示例对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81DML-%E4%B8%8E%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.6.</span> <span class="toc-text">六、DML 与事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%BA%8B%E5%8A%A1%E5%9F%BA%E7%A1%80"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 事务基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 事务操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%BD%AC%E8%B4%A6%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 实战案例：转账操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81DML-%E5%AE%9E%E6%88%98%E7%BB%83%E4%B9%A0"><span class="toc-number">1.7.</span> <span class="toc-text">七、DML 实战练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%BB%83%E4%B9%A0"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 员工管理系统练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F%E7%BB%83%E4%B9%A0"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 订单系统练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81DML-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.8.</span> <span class="toc-text">八、DML 性能优化建议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-INSERT-%E4%BC%98%E5%8C%96"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 INSERT 优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-UPDATE-%E4%BC%98%E5%8C%96"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 UPDATE 优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-DELETE-%E4%BC%98%E5%8C%96"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 DELETE 优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">1.9.</span> <span class="toc-text">九、小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.9.1.</span> <span class="toc-text">知识点回顾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML-%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="toc-number">1.9.2.</span> <span class="toc-text">DML 命令速查表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.9.3.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%94%EF%BC%89%E5%9F%BA%E7%A1%80%E7%AF%87%E6%80%BB%E7%BB%93/" title="MySQL 进阶教程（五）基础篇总结">MySQL 进阶教程（五）基础篇总结</a><time datetime="2026-02-23T11:00:00.000Z" title="发表于 2026-02-23 19:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（四）事务详解">MySQL 进阶教程（四）事务详解</a><time datetime="2026-02-23T10:00:00.000Z" title="发表于 2026-02-23 18:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%89%EF%BC%89%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（三）多表查询详解">MySQL 进阶教程（三）多表查询详解</a><time datetime="2026-02-23T09:00:00.000Z" title="发表于 2026-02-23 17:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A6%E6%9D%9F%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（二）数据库约束详解">MySQL 进阶教程（二）数据库约束详解</a><time datetime="2026-02-23T08:00:00.000Z" title="发表于 2026-02-23 16:00:00">2026-02-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/23/MySQL%20%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="MySQL 进阶教程（一）常用函数详解">MySQL 进阶教程（一）常用函数详解</a><time datetime="2026-02-23T07:00:00.000Z" title="发表于 2026-02-23 15:00:00">2026-02-23</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 过拟合的炸鱼薯条</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>