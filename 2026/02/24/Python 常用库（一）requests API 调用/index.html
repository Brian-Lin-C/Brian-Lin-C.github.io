<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python 常用库（一）requests API 调用 | 过拟合的炸鱼薯条</title><meta name="author" content="过拟合的炸鱼薯条"><meta name="copyright" content="过拟合的炸鱼薯条"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Python 常用库（一）requests API 调用requests 是 Python 最流行的 HTTP 客户端库。本篇将介绍如何使用 requests 进行 API 调用、处理响应、文件上传等实用技能。 一、requests 简介1.1 为什么使用 requests？ 简洁 API：人性化设计，代码简单易读 功能强大：支持各种 HTTP 方法、认证、会话等 生态完善：文档丰富，社区活跃 自">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 常用库（一）requests API 调用">
<meta property="og:url" content="https://brian-lin-c.github.io/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests%20API%20%E8%B0%83%E7%94%A8/index.html">
<meta property="og:site_name" content="过拟合的炸鱼薯条">
<meta property="og:description" content="Python 常用库（一）requests API 调用requests 是 Python 最流行的 HTTP 客户端库。本篇将介绍如何使用 requests 进行 API 调用、处理响应、文件上传等实用技能。 一、requests 简介1.1 为什么使用 requests？ 简洁 API：人性化设计，代码简单易读 功能强大：支持各种 HTTP 方法、认证、会话等 生态完善：文档丰富，社区活跃 自">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg">
<meta property="article:published_time" content="2026-02-24T09:00:00.000Z">
<meta property="article:modified_time" content="2026-02-24T03:46:39.432Z">
<meta property="article:author" content="过拟合的炸鱼薯条">
<meta property="article:tag" content="API">
<meta property="article:tag" content="HTTP">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="requests">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Python 常用库（一）requests API 调用",
  "url": "https://brian-lin-c.github.io/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests%20API%20%E8%B0%83%E7%94%A8/",
  "image": "https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg",
  "datePublished": "2026-02-24T09:00:00.000Z",
  "dateModified": "2026-02-24T03:46:39.432Z",
  "author": [
    {
      "@type": "Person",
      "name": "过拟合的炸鱼薯条",
      "url": "https://brian-lin-c.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brian-lin-c.github.io/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests%20API%20%E8%B0%83%E7%94%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python 常用库（一）requests API 调用',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">过拟合的炸鱼薯条</span></a><a class="nav-page-title" href="/"><span class="site-name">Python 常用库（一）requests API 调用</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Python 常用库（一）requests API 调用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-24T09:00:00.000Z" title="发表于 2026-02-24 17:00:00">2026-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-24T03:46:39.432Z" title="更新于 2026-02-24 11:46:39">2026-02-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python-%E6%95%99%E7%A8%8B/">Python 教程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Python-常用库（一）requests-API-调用"><a href="#Python-常用库（一）requests-API-调用" class="headerlink" title="Python 常用库（一）requests API 调用"></a>Python 常用库（一）requests API 调用</h1><p>requests 是 Python 最流行的 HTTP 客户端库。本篇将介绍如何使用 requests 进行 API 调用、处理响应、文件上传等实用技能。</p>
<h2 id="一、requests-简介"><a href="#一、requests-简介" class="headerlink" title="一、requests 简介"></a>一、requests 简介</h2><h3 id="1-1-为什么使用-requests？"><a href="#1-1-为什么使用-requests？" class="headerlink" title="1.1 为什么使用 requests？"></a>1.1 为什么使用 requests？</h3><ul>
<li><strong>简洁 API</strong>：人性化设计，代码简单易读</li>
<li><strong>功能强大</strong>：支持各种 HTTP 方法、认证、会话等</li>
<li><strong>生态完善</strong>：文档丰富，社区活跃</li>
<li><strong>自动处理</strong>：自动处理 URL 编码、Cookie、Session 等</li>
</ul>
<h3 id="1-2-安装与导入"><a href="#1-2-安装与导入" class="headerlink" title="1.2 安装与导入"></a>1.2 安装与导入</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看版本</span></span><br><span class="line"><span class="built_in">print</span>(requests.__version__)</span><br></pre></td></tr></table></figure>

<h2 id="二、基础请求"><a href="#二、基础请求" class="headerlink" title="二、基础请求"></a>二、基础请求</h2><h3 id="2-1-GET-请求"><a href="#2-1-GET-请求" class="headerlink" title="2.1 GET 请求"></a>2.1 GET 请求</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最简单的 GET 请求</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参数的 GET 请求</span></span><br><span class="line">params = &#123;<span class="string">&#x27;q&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;page&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/search&#x27;</span>, params=params)</span><br><span class="line"></span><br><span class="line"><span class="comment"># params 会自动拼接成 URL</span></span><br><span class="line"><span class="comment"># https://api.example.com/search?q=python&amp;page=1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看最终 URL</span></span><br><span class="line"><span class="built_in">print</span>(response.url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加请求头</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置超时（秒）</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, timeout=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - timeout 是必须的，防止程序无限等待</span></span><br><span class="line"><span class="comment"># - User-Agent 避免被某些网站屏蔽</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-POST-请求"><a href="#2-2-POST-请求" class="headerlink" title="2.2 POST 请求"></a>2.2 POST 请求</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发送 JSON 数据</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;zhangsan@example.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, json=data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># json 参数会自动：</span></span><br><span class="line"><span class="comment"># 1. 将字典序列化为 JSON</span></span><br><span class="line"><span class="comment"># 2. 设置 Content-Type: application/json</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送表单数据</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, data=data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># data 参数会发送 application/x-www-form-urlencoded</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - 发送 JSON 用 json= 参数</span></span><br><span class="line"><span class="comment"># - 发送表单用 data= 参数</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-其他-HTTP-方法"><a href="#2-3-其他-HTTP-方法" class="headerlink" title="2.3 其他 HTTP 方法"></a>2.3 其他 HTTP 方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PUT 请求（更新资源）</span></span><br><span class="line">response = requests.put(<span class="string">&#x27;https://api.example.com/users/1&#x27;</span>, json=&#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;新名字&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;new@example.com&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PATCH 请求（部分更新）</span></span><br><span class="line">response = requests.patch(<span class="string">&#x27;https://api.example.com/users/1&#x27;</span>, json=&#123;</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;新名字&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># DELETE 请求（删除资源）</span></span><br><span class="line">response = requests.delete(<span class="string">&#x27;https://api.example.com/users/1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># HEAD 请求（只获取响应头）</span></span><br><span class="line">response = requests.head(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># OPTIONS 请求（获取服务器支持的方法）</span></span><br><span class="line">response = requests.options(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.headers[<span class="string">&#x27;Allow&#x27;</span>])</span><br></pre></td></tr></table></figure>

<h2 id="三、响应处理"><a href="#三、响应处理" class="headerlink" title="三、响应处理"></a>三、响应处理</h2><h3 id="3-1-响应状态码"><a href="#3-1-响应状态码" class="headerlink" title="3.1 响应状态码"></a>3.1 响应状态码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 状态码</span></span><br><span class="line"><span class="built_in">print</span>(response.status_code)  <span class="comment"># 200, 404, 500 等</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用状态码含义</span></span><br><span class="line"><span class="comment"># 200 OK - 请求成功</span></span><br><span class="line"><span class="comment"># 201 Created - 资源创建成功</span></span><br><span class="line"><span class="comment"># 204 No Content - 成功但无内容返回</span></span><br><span class="line"><span class="comment"># 400 Bad Request - 请求参数错误</span></span><br><span class="line"><span class="comment"># 401 Unauthorized - 未授权</span></span><br><span class="line"><span class="comment"># 403 Forbidden - 禁止访问</span></span><br><span class="line"><span class="comment"># 404 Not Found - 资源不存在</span></span><br><span class="line"><span class="comment"># 500 Internal Server Error - 服务器内部错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否成功</span></span><br><span class="line"><span class="keyword">if</span> response.ok:  <span class="comment"># 状态码 200-399</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求成功&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;成功&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> response.status_code == <span class="number">404</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;资源不存在&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> response.status_code &gt;= <span class="number">500</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;服务器错误&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 抛出异常（如果不是 200）</span></span><br><span class="line">response.raise_for_status()  <span class="comment"># 非 2xx 会抛出 HTTPError</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-响应内容"><a href="#3-2-响应内容" class="headerlink" title="3.2 响应内容"></a>3.2 响应内容</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON 响应</span></span><br><span class="line">data = response.json()  <span class="comment"># 返回字典或列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文本响应</span></span><br><span class="line">text = response.text  <span class="comment"># 字符串，自动解码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字节响应</span></span><br><span class="line">content = response.content  <span class="comment"># bytes，适合下载文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 响应头</span></span><br><span class="line"><span class="built_in">print</span>(response.headers)</span><br><span class="line"><span class="built_in">print</span>(response.headers[<span class="string">&#x27;Content-Type&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编码</span></span><br><span class="line"><span class="built_in">print</span>(response.encoding)  <span class="comment"># 检测的编码</span></span><br><span class="line">response.encoding = <span class="string">&#x27;utf-8&#x27;</span>  <span class="comment"># 手动设置编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - response.json() 会解析 JSON</span></span><br><span class="line"><span class="comment"># - response.text 自动解码</span></span><br><span class="line"><span class="comment"># - response.content 原始字节</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-下载文件"><a href="#3-3-下载文件" class="headerlink" title="3.3 下载文件"></a>3.3 下载文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 小文件下载</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://example.com/file.jpg&#x27;</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file.jpg&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(response.content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 大文件下载（流式，节省内存）</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://example.com/large_file.zip&#x27;</span>, stream=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;large_file.zip&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> response.iter_content(chunk_size=<span class="number">8192</span>):</span><br><span class="line">        f.write(chunk)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带进度条的下载（需要 tqdm）</span></span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://example.com/large_file.zip&#x27;</span>, stream=<span class="literal">True</span>)</span><br><span class="line">total = <span class="built_in">int</span>(response.headers.get(<span class="string">&#x27;content-length&#x27;</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;large_file.zip&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">with</span> tqdm(total=total, unit=<span class="string">&#x27;B&#x27;</span>, unit_scale=<span class="literal">True</span>) <span class="keyword">as</span> pbar:</span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> response.iter_content(chunk_size=<span class="number">8192</span>):</span><br><span class="line">            f.write(chunk)</span><br><span class="line">            pbar.update(<span class="built_in">len</span>(chunk))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - 大文件一定要用 stream=True</span></span><br><span class="line"><span class="comment"># - iter_content 分块读取，避免内存溢出</span></span><br></pre></td></tr></table></figure>

<h2 id="四、请求头与认证"><a href="#四、请求头与认证" class="headerlink" title="四、请求头与认证"></a>四、请求头与认证</h2><h3 id="4-1-自定义请求头"><a href="#4-1-自定义请求头" class="headerlink" title="4.1 自定义请求头"></a>4.1 自定义请求头</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;MyApp/1.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer YOUR_TOKEN&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;value&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, headers=headers)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-Basic-认证"><a href="#4-2-Basic-认证" class="headerlink" title="4.2 Basic 认证"></a>4.2 Basic 认证</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests.auth <span class="keyword">import</span> HTTPBasicAuth</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式一：使用 HTTPBasicAuth</span></span><br><span class="line">response = requests.get(</span><br><span class="line">    <span class="string">&#x27;https://api.example.com/protected&#x27;</span>,</span><br><span class="line">    auth=HTTPBasicAuth(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式二：简化写法</span></span><br><span class="line">response = requests.get(</span><br><span class="line">    <span class="string">&#x27;https://api.example.com/protected&#x27;</span>,</span><br><span class="line">    auth=(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式三：手动设置 Header</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">credentials = base64.b64encode(<span class="string">b&#x27;username:password&#x27;</span>).decode()</span><br><span class="line">headers = &#123;<span class="string">&#x27;Authorization&#x27;</span>: <span class="string">f&#x27;Basic <span class="subst">&#123;credentials&#125;</span>&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/protected&#x27;</span>, headers=headers)</span><br></pre></td></tr></table></figure>

<h3 id="4-3-Token-Bearer-认证"><a href="#4-3-Token-Bearer-认证" class="headerlink" title="4.3 Token&#x2F;Bearer 认证"></a>4.3 Token&#x2F;Bearer 认证</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># API Key</span></span><br><span class="line">headers = &#123;<span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer YOUR_ACCESS_TOKEN&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">headers = &#123;<span class="string">&#x27;X-API-Key&#x27;</span>: <span class="string">&#x27;YOUR_API_KEY&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, headers=headers)</span><br></pre></td></tr></table></figure>

<h3 id="4-4-Cookie-处理"><a href="#4-4-Cookie-处理" class="headerlink" title="4.4 Cookie 处理"></a>4.4 Cookie 处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发送 Cookie</span></span><br><span class="line">cookies = &#123;<span class="string">&#x27;session_id&#x27;</span>: <span class="string">&#x27;abc123&#x27;</span>, <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, cookies=cookies)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 Cookie</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/login&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.cookies.get_dict())</span><br><span class="line"><span class="built_in">print</span>(response.cookies[<span class="string">&#x27;session_id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 持久化 Cookie（使用 Session）</span></span><br><span class="line">session = requests.Session()</span><br><span class="line">session.get(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, data=&#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;123&#x27;</span>&#125;)</span><br><span class="line"><span class="comment"># Cookie 自动保存</span></span><br><span class="line">response = session.get(<span class="string">&#x27;https://api.example.com/protected&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="五、Session-会话"><a href="#五、Session-会话" class="headerlink" title="五、Session 会话"></a>五、Session 会话</h2><h3 id="5-1-Session-基础"><a href="#5-1-Session-基础" class="headerlink" title="5.1 Session 基础"></a>5.1 Session 基础</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建会话</span></span><br><span class="line">session = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会话会保持 Cookie 和连接</span></span><br><span class="line">session.get(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, data=&#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后续请求自动携带 Cookie</span></span><br><span class="line">response = session.get(<span class="string">&#x27;https://api.example.com/profile&#x27;</span>)</span><br><span class="line">response = session.get(<span class="string">&#x27;https://api.example.com/settings&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭会话</span></span><br><span class="line">session.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推荐使用上下文管理器</span></span><br><span class="line"><span class="keyword">with</span> requests.Session() <span class="keyword">as</span> session:</span><br><span class="line">    session.get(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, data=&#123;...&#125;)</span><br><span class="line">    response = session.get(<span class="string">&#x27;https://api.example.com/profile&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="5-2-Session-配置"><a href="#5-2-Session-配置" class="headerlink" title="5.2 Session 配置"></a>5.2 Session 配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">session = requests.Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认请求头</span></span><br><span class="line">session.headers.update(&#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;MyApp/1.0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认超时</span></span><br><span class="line"><span class="comment"># 注意：requests 不直接支持 Session 级别的超时设置</span></span><br><span class="line"><span class="comment"># 需要在每次请求时指定</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 Adapter（连接池配置）</span></span><br><span class="line"><span class="keyword">from</span> requests.adapters <span class="keyword">import</span> HTTPAdapter</span><br><span class="line"></span><br><span class="line">adapter = HTTPAdapter(</span><br><span class="line">    pool_connections=<span class="number">10</span>,      <span class="comment"># 连接池大小</span></span><br><span class="line">    pool_maxsize=<span class="number">20</span>,          <span class="comment"># 最大连接数</span></span><br><span class="line">    max_retries=<span class="number">3</span>,            <span class="comment"># 重试次数</span></span><br><span class="line">    pool_block=<span class="literal">False</span>          <span class="comment"># 是否阻塞</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">session.mount(<span class="string">&#x27;https://&#x27;</span>, adapter)</span><br><span class="line">session.mount(<span class="string">&#x27;http://&#x27;</span>, adapter)</span><br></pre></td></tr></table></figure>

<h3 id="5-3-性能优势"><a href="#5-3-性能优势" class="headerlink" title="5.3 性能优势"></a>5.3 性能优势</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不使用 Session（每次新建连接）</span></span><br><span class="line">start = time.time()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Without Session: <span class="subst">&#123;time.time() - start:<span class="number">.2</span>f&#125;</span>s&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 Session（复用连接）</span></span><br><span class="line">start = time.time()</span><br><span class="line">session = requests.Session()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    session.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;With Session: <span class="subst">&#123;time.time() - start:<span class="number">.2</span>f&#125;</span>s&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - 多次请求同一域名一定要用 Session</span></span><br><span class="line"><span class="comment"># - 连接池可以显著提升性能</span></span><br></pre></td></tr></table></figure>

<h2 id="六、异常处理"><a href="#六、异常处理" class="headerlink" title="六、异常处理"></a>六、异常处理</h2><h3 id="6-1-常见异常"><a href="#6-1-常见异常" class="headerlink" title="6.1 常见异常"></a>6.1 常见异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> (</span><br><span class="line">    RequestException,</span><br><span class="line">    Timeout,</span><br><span class="line">    ConnectionError,</span><br><span class="line">    HTTPError,</span><br><span class="line">    TooManyRedirects,</span><br><span class="line">    JSONDecodeError</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, timeout=<span class="number">5</span>)</span><br><span class="line">    response.raise_for_status()</span><br><span class="line">    data = response.json()</span><br><span class="line"><span class="keyword">except</span> Timeout:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求超时&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ConnectionError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;连接错误&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;HTTP 错误：<span class="subst">&#123;e.response.status_code&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> JSONDecodeError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;JSON 解析失败&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> RequestException <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;请求异常：<span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-2-重试机制"><a href="#6-2-重试机制" class="headerlink" title="6.2 重试机制"></a>6.2 重试机制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests.adapters <span class="keyword">import</span> HTTPAdapter</span><br><span class="line"><span class="keyword">from</span> urllib3.util.retry <span class="keyword">import</span> Retry</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_retry_session</span>():</span><br><span class="line">    session = requests.Session()</span><br><span class="line"></span><br><span class="line">    retry = Retry(</span><br><span class="line">        total=<span class="number">3</span>,                    <span class="comment"># 总重试次数</span></span><br><span class="line">        backoff_factor=<span class="number">0.5</span>,         <span class="comment"># 重试间隔倍数</span></span><br><span class="line">        status_forcelist=[<span class="number">500</span>, <span class="number">502</span>, <span class="number">503</span>, <span class="number">504</span>],  <span class="comment"># 需要重试的状态码</span></span><br><span class="line">        allowed_methods=[<span class="string">&quot;HEAD&quot;</span>, <span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>]  <span class="comment"># 可重试的方法</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    adapter = HTTPAdapter(max_retries=retry)</span><br><span class="line">    session.mount(<span class="string">&#x27;https://&#x27;</span>, adapter)</span><br><span class="line">    session.mount(<span class="string">&#x27;http://&#x27;</span>, adapter)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> session</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">session = create_retry_session()</span><br><span class="line">response = session.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="七、高级用法"><a href="#七、高级用法" class="headerlink" title="七、高级用法"></a>七、高级用法</h2><h3 id="7-1-文件上传"><a href="#7-1-文件上传" class="headerlink" title="7.1 文件上传"></a>7.1 文件上传</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 上传单个文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    files = &#123;<span class="string">&#x27;file&#x27;</span>: f&#125;</span><br><span class="line">    response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定文件名</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    files = &#123;<span class="string">&#x27;file&#x27;</span>: (<span class="string">&#x27;custom_name.txt&#x27;</span>, f)&#125;</span><br><span class="line">    response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定文件类型</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;image.jpg&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    files = &#123;<span class="string">&#x27;file&#x27;</span>: (<span class="string">&#x27;image.jpg&#x27;</span>, f, <span class="string">&#x27;image/jpeg&#x27;</span>)&#125;</span><br><span class="line">    response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 完整格式</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    files = &#123;</span><br><span class="line">        <span class="string">&#x27;file&#x27;</span>: (<span class="string">&#x27;filename.txt&#x27;</span>, f, <span class="string">&#x27;text/plain&#x27;</span>, &#123;<span class="string">&#x27;Expires&#x27;</span>: <span class="string">&#x27;0&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传多个文件</span></span><br><span class="line">files = &#123;</span><br><span class="line">    <span class="string">&#x27;file1&#x27;</span>: <span class="built_in">open</span>(<span class="string">&#x27;file1.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;file2&#x27;</span>: <span class="built_in">open</span>(<span class="string">&#x27;file2.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带其他表单数据</span></span><br><span class="line">data = &#123;<span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;文件描述&#x27;</span>&#125;</span><br><span class="line">files = &#123;<span class="string">&#x27;file&#x27;</span>: <span class="built_in">open</span>(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://api.example.com/upload&#x27;</span>, data=data, files=files)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - 文件要用 &#x27;rb&#x27; 模式打开</span></span><br><span class="line"><span class="comment"># - 上传后记得关闭文件</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-发送-Cookie"><a href="#7-2-发送-Cookie" class="headerlink" title="7.2 发送 Cookie"></a>7.2 发送 Cookie</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 发送 Cookie</span></span><br><span class="line">cookies = &#123;<span class="string">&#x27;session&#x27;</span>: <span class="string">&#x27;abc123&#x27;</span>, <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;zhangsan&#x27;</span>&#125;</span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, cookies=cookies)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 CookieJar</span></span><br><span class="line"><span class="keyword">from</span> http.cookiejar <span class="keyword">import</span> CookieJar</span><br><span class="line"></span><br><span class="line">cj = CookieJar()</span><br><span class="line">session = requests.Session()</span><br><span class="line">session.cookies = cj</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录后 Cookie 自动保存</span></span><br><span class="line">session.post(<span class="string">&#x27;https://api.example.com/login&#x27;</span>, data=&#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;pwd&#x27;</span>: <span class="string">&#x27;123&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 后续请求自动携带 Cookie</span></span><br><span class="line">response = session.get(<span class="string">&#x27;https://api.example.com/protected&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="7-3-代理设置"><a href="#7-3-代理设置" class="headerlink" title="7.3 代理设置"></a>7.3 代理设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个请求使用代理</span></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;http://proxy.example.com:8080&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;https://proxy.example.com:8080&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, proxies=proxies)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带认证的代理</span></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;http://user:password@proxy.example.com:8080&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Session 级别设置代理</span></span><br><span class="line">session = requests.Session()</span><br><span class="line">session.proxies = &#123;</span><br><span class="line">    <span class="string">&#x27;https&#x27;</span>: <span class="string">&#x27;https://proxy.example.com:8080&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-请求准备与发送"><a href="#7-4-请求准备与发送" class="headerlink" title="7.4 请求准备与发送"></a>7.4 请求准备与发送</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手动准备请求</span></span><br><span class="line">req = requests.Request(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;https://api.example.com/data&#x27;</span>, json=&#123;<span class="string">&#x27;key&#x27;</span>: <span class="string">&#x27;value&#x27;</span>&#125;)</span><br><span class="line">prepared = req.prepare()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看请求详情</span></span><br><span class="line"><span class="built_in">print</span>(prepared.url)</span><br><span class="line"><span class="built_in">print</span>(prepared.headers)</span><br><span class="line"><span class="built_in">print</span>(prepared.body)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 Session 发送</span></span><br><span class="line">session = requests.Session()</span><br><span class="line">response = session.send(prepared)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提醒自己：</span></span><br><span class="line"><span class="comment"># - 适合需要完全控制请求的场景</span></span><br><span class="line"><span class="comment"># - 可以用于请求签名等高级操作</span></span><br></pre></td></tr></table></figure>

<h2 id="八、实战示例"><a href="#八、实战示例" class="headerlink" title="八、实战示例"></a>八、实战示例</h2><h3 id="8-1-调用-REST-API"><a href="#8-1-调用-REST-API" class="headerlink" title="8.1 调用 REST API"></a>8.1 调用 REST API</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">APIClient</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;简单的 API 客户端&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, base_url, api_key=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.base_url = base_url</span><br><span class="line">        <span class="variable language_">self</span>.session = requests.Session()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> api_key:</span><br><span class="line">            <span class="variable language_">self</span>.session.headers.update(&#123;</span><br><span class="line">                <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">f&#x27;Bearer <span class="subst">&#123;api_key&#125;</span>&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, endpoint, **kwargs</span>):</span><br><span class="line">        url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/<span class="subst">&#123;endpoint&#125;</span>&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.session.get(url, **kwargs)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, endpoint, data=<span class="literal">None</span>, **kwargs</span>):</span><br><span class="line">        url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/<span class="subst">&#123;endpoint&#125;</span>&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.session.post(url, json=data, **kwargs)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, endpoint, data=<span class="literal">None</span>, **kwargs</span>):</span><br><span class="line">        url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/<span class="subst">&#123;endpoint&#125;</span>&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.session.put(url, json=data, **kwargs)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> response.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, endpoint, **kwargs</span>):</span><br><span class="line">        url = <span class="string">f&quot;<span class="subst">&#123;self.base_url&#125;</span>/<span class="subst">&#123;endpoint&#125;</span>&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.session.delete(url, **kwargs)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> response.status_code == <span class="number">204</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用示例</span></span><br><span class="line">client = APIClient(<span class="string">&#x27;https://api.example.com&#x27;</span>, api_key=<span class="string">&#x27;YOUR_KEY&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取列表</span></span><br><span class="line">users = client.get(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取单个</span></span><br><span class="line">user = client.get(<span class="string">&#x27;users/1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建</span></span><br><span class="line">new_user = client.post(<span class="string">&#x27;users&#x27;</span>, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;zhangsan@example.com&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新</span></span><br><span class="line">client.put(<span class="string">&#x27;users/1&#x27;</span>, &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;李四&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">client.delete(<span class="string">&#x27;users/1&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="8-2-分页数据获取"><a href="#8-2-分页数据获取" class="headerlink" title="8.2 分页数据获取"></a>8.2 分页数据获取</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_all_pages</span>(<span class="params">base_url</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;获取所有分页数据&quot;&quot;&quot;</span></span><br><span class="line">    all_data = []</span><br><span class="line">    page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        response = requests.get(base_url, params=&#123;<span class="string">&#x27;page&#x27;</span>: page&#125;)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        data = response.json()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:  <span class="comment"># 没有更多数据</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        all_data.extend(data)</span><br><span class="line">        page += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> all_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">all_users = get_all_pages(<span class="string">&#x27;https://api.example.com/users&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="8-3-并发请求（配合-concurrent-futures）"><a href="#8-3-并发请求（配合-concurrent-futures）" class="headerlink" title="8.3 并发请求（配合 concurrent.futures）"></a>8.3 并发请求（配合 concurrent.futures）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor, as_completed</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fetch_url</span>(<span class="params">url</span>):</span><br><span class="line">    response = requests.get(url, timeout=<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">return</span> url, response.status_code</span><br><span class="line"></span><br><span class="line">urls = [</span><br><span class="line">    <span class="string">&#x27;https://api.example.com/data1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://api.example.com/data2&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;https://api.example.com/data3&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">results = &#123;&#125;</span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor(max_workers=<span class="number">5</span>) <span class="keyword">as</span> executor:</span><br><span class="line">    futures = &#123;executor.submit(fetch_url, url): url <span class="keyword">for</span> url <span class="keyword">in</span> urls&#125;</span><br><span class="line">    <span class="keyword">for</span> future <span class="keyword">in</span> as_completed(futures):</span><br><span class="line">        url, status = future.result()</span><br><span class="line">        results[url] = status</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(results)</span><br></pre></td></tr></table></figure>

<h2 id="九、最佳实践"><a href="#九、最佳实践" class="headerlink" title="九、最佳实践"></a>九、最佳实践</h2><blockquote>
<p><strong>提醒自己</strong>：</p>
<ol>
<li><strong>始终设置超时</strong>：防止程序卡死</li>
<li><strong>使用 Session</strong>：复用连接，提高效率</li>
<li><strong>处理异常</strong>：网络请求随时可能失败</li>
<li><strong>检查状态码</strong>：不要假设请求总是成功</li>
<li><strong>限制重试</strong>：避免无限重试</li>
<li><strong>使用上下文管理器</strong>：确保资源正确释放</li>
<li><strong>记录日志</strong>：方便调试和问题追踪</li>
</ol>
</blockquote>
<h2 id="十、练习"><a href="#十、练习" class="headerlink" title="十、练习"></a>十、练习</h2><ol>
<li>编写一个函数，获取 GitHub 用户的公开信息</li>
<li>实现一个带重试机制的下载器</li>
<li>使用 Session 实现需要登录的 API 调用</li>
<li>编写一个批量检测网站可用性的脚本</li>
<li>实现一个简单的 API 客户端类，封装常用的 CRUD 操作</li>
</ol>
<hr>
<p><strong>上一篇</strong>：[Python 数据科学（三）：PyArrow 高性能数据操作](&#x2F;2026&#x2F;02&#x2F;24&#x2F;Python-数据科学（三）PyArrow 高性能数据操作&#x2F;)</p>
<p><strong>下一篇</strong>：<a href="/2026/02/24/Python-%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89json-yaml-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/">Python 常用库（二）：json&#x2F;yaml配置文件处理</a></p>
<p><strong>参考资源</strong>：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://requests.readthedocs.io/">requests 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">HTTP 状态码文档</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.python-requests.org/en/master/user/advanced/">Real World Requests</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io">过拟合的炸鱼薯条</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests%20API%20%E8%B0%83%E7%94%A8/">https://brian-lin-c.github.io/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests%20API%20%E8%B0%83%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://brian-lin-c.github.io" target="_blank">过拟合的炸鱼薯条</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/requests/">requests</a><a class="post-meta__tags" href="/tags/API/">API</a><a class="post-meta__tags" href="/tags/HTTP/">HTTP</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89json%20yaml%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" title="Python 常用库（二）json/yaml 配置文件处理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Python 常用库（二）json/yaml 配置文件处理</div></div><div class="info-2"><div class="info-item-1">Python 常用库（二）json&#x2F;yaml 配置文件处理配置文件是项目中不可或缺的部分。本篇将介绍如何使用 json 和 yaml 格式进行配置管理。 一、JSON 基础1.1 JSON 简介JSON（JavaScript Object Notation） 是一种轻量级的数据交换格式，易于人阅读和编写，也易于机器解析和生成。 JSON 支持的数据类型：  字符串（string） 数字（number） 布尔值（boolean） null 数组（array） 对象（object）  1.2 JSON 与 Python 类型对应   JSON Python    object dict   array list   string str   number (int) int   number (float) float   true True   false False   null None   二、json 模块使用2.1 序列化与反序列化123456789101112131415161718192021222324252627282930313233343536373...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%EF%BC%88%E4%B8%89%EF%BC%89PyArrow%20%E9%AB%98%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/" title="Python 数据科学（三）PyArrow 高性能数据操作"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Python 数据科学（三）PyArrow 高性能数据操作</div></div><div class="info-2"><div class="info-item-1">Python 数据科学（三）PyArrow 高性能数据操作PyArrow 是一个高性能的数据处理库，提供列式内存格式和快速的数据 I&#x2F;O。本篇将介绍 PyArrow 的核心功能和使用技巧。 一、PyArrow 简介1.1 为什么使用 PyArrow？ 高性能：列式存储，比 Pandas 快数倍到数十倍 零拷贝：与 Pandas、NumPy 无缝集成，无需数据复制 跨语言：支持 Python、C++、Java、R 等 大文件处理：支持流式处理超大文件 现代格式：Parquet、Feather 等高效格式支持  1.2 安装与导入1pip install pyarrow  1234567import pyarrow as paimport pyarrow.parquet as pqimport pyarrow.csv as csvimport pandas as pd# 查看版本print(pa.__version__)  二、PyArrow 数据结构2.1 Table（表格）1234567891011121314151617181920import pyarrow as ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%BA%8C%EF%BC%89json%20yaml%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/" title="Python 常用库（二）json&#x2F;yaml 配置文件处理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 常用库（二）json&#x2F;yaml 配置文件处理</div></div><div class="info-2"><div class="info-item-1">Python 常用库（二）json&#x2F;yaml 配置文件处理配置文件是项目中不可或缺的部分。本篇将介绍如何使用 json 和 yaml 格式进行配置管理。 一、JSON 基础1.1 JSON 简介JSON（JavaScript Object Notation） 是一种轻量级的数据交换格式，易于人阅读和编写，也易于机器解析和生成。 JSON 支持的数据类型：  字符串（string） 数字（number） 布尔值（boolean） null 数组（array） 对象（object）  1.2 JSON 与 Python 类型对应   JSON Python    object dict   array list   string str   number (int) int   number (float) float   true True   false False   null None   二、json 模块使用2.1 序列化与反序列化123456789101112131415161718192021222324252627282930313233343536373...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%EF%BC%88%E4%BA%8C%EF%BC%89Pandas%20%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" title="Python 数据科学（二）Pandas 数据处理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 数据科学（二）Pandas 数据处理</div></div><div class="info-2"><div class="info-item-1">Python 数据科学（二）Pandas 数据处理Pandas 是 Python 数据分析的核心库。本篇将详细介绍 DataFrame 操作、数据清洗、数据转换等核心技能。 一、Pandas 简介1.1 为什么使用 Pandas？ 数据处理强大：支持 CSV、Excel、SQL、JSON 等多种格式 DataFrame 结构：类似 Excel 表格，直观易用 数据清洗方便：处理缺失值、重复值、异常值 数据分析功能：分组、聚合、透视表 与 NumPy 兼容：底层使用 NumPy，性能优秀  1.2 安装与导入1pip install pandas  123456789import pandas as pdimport numpy as np# 查看版本print(pd.__version__)# 设置显示选项pd.set_option(&#x27;display.max_columns&#x27;, None)  # 显示所有列pd.set_option(&#x27;display.width&#x27;, None)        # 自适应宽度  二、Series 和 Data...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%EF%BC%88%E4%B8%89%EF%BC%89PyArrow%20%E9%AB%98%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C/" title="Python 数据科学（三）PyArrow 高性能数据操作"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 数据科学（三）PyArrow 高性能数据操作</div></div><div class="info-2"><div class="info-item-1">Python 数据科学（三）PyArrow 高性能数据操作PyArrow 是一个高性能的数据处理库，提供列式内存格式和快速的数据 I&#x2F;O。本篇将介绍 PyArrow 的核心功能和使用技巧。 一、PyArrow 简介1.1 为什么使用 PyArrow？ 高性能：列式存储，比 Pandas 快数倍到数十倍 零拷贝：与 Pandas、NumPy 无缝集成，无需数据复制 跨语言：支持 Python、C++、Java、R 等 大文件处理：支持流式处理超大文件 现代格式：Parquet、Feather 等高效格式支持  1.2 安装与导入1pip install pyarrow  1234567import pyarrow as paimport pyarrow.parquet as pqimport pyarrow.csv as csvimport pandas as pd# 查看版本print(pa.__version__)  二、PyArrow 数据结构2.1 Table（表格）1234567891011121314151617181920import pyarrow as ...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/" title="Python 基础教程（二）面向对象编程"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 基础教程（二）面向对象编程</div></div><div class="info-2"><div class="info-item-1">Python 基础教程（二）面向对象编程面向对象编程（OOP）是 Python 的核心编程范式之一。本篇将详细介绍 Python 中的类与对象、继承、多态等核心概念。 一、面向对象基础1.1 什么是面向对象？面向对象编程（Object-Oriented Programming, OOP） 是一种编程范式，它将数据和处理数据的方法封装在一起，形成”对象”。 核心概念：  类（Class）：对象的模板&#x2F;蓝图，定义对象的属性和方法 对象（Object）：类的实例，具体的实体 属性（Attribute）：对象的特征&#x2F;数据 方法（Method）：对象的行为&#x2F;操作  比喻理解：  类 &#x3D; 房屋设计图 对象 &#x3D; 根据设计图建造的具体房屋  1.2 为什么使用面向对象？ 提醒自己：  代码复用：继承机制减少重复代码 易于维护：封装使代码结构清晰 模块化：不同对象独立工作，降低耦合 模拟现实：更符合人类思维方式   二、类的定义与使用2.1 定义类123456789101112131415161718192021222324252627282930...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%89%EF%BC%89logging%20%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97/" title="Python 常用库（三）logging 日志模块"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 常用库（三）logging 日志模块</div></div><div class="info-2"><div class="info-item-1">Python 常用库（三）logging 日志模块日志是程序调试、监控和问题排查的重要工具。本篇将详细介绍 Python 内置的 logging 模块。 一、logging 简介1.1 为什么使用 logging？ 标准库：无需安装，开箱即用 灵活配置：可配置输出格式、级别、目标等 高性能：内置优化，适合生产环境 可扩展：支持自定义 Handler、Formatter、Filter  1.2 日志级别   级别 数值 说明 使用场景    DEBUG 10 调试信息 开发调试时的详细信息   INFO 20 一般信息 程序正常运行的信息   WARNING 30 警告信息 不影响运行但需要注意   ERROR 40 错误信息 程序错误但不影响继续运行   CRITICAL 50 严重错误 严重错误，程序可能无法继续   1234567import logginglogging.debug(&quot;调试信息&quot;)logging.info(&quot;一般信息&quot;)logging.warning(&quot;警告信息&quot;)logging.error(&qu...</div></div></div></a><a class="pagination-related" href="/2026/02/24/Python%20%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/" title="Python 基础教程（一）基础语法入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">Python 基础教程（一）基础语法入门</div></div><div class="info-2"><div class="info-item-1">Python 基础教程（一）基础语法入门欢迎来到 Python 基础教程系列！本篇将从零开始介绍 Python 的基础语法，帮助你快速上手 Python 编程。 一、Python 简介1.1 为什么选择 Python？ 语法简洁：代码可读性强，接近自然语言 生态丰富：拥有庞大的第三方库生态系统 应用广泛：Web 开发、数据分析、人工智能、自动化脚本等 跨平台：Windows、Linux、macOS 均可运行 社区活跃：遇到问题容易找到解决方案  1.2 Python 版本选择 提醒自己：务必使用 Python 3.x（推荐 3.8+），Python 2 已停止维护。  二、环境搭建2.1 安装 PythonWindows：  访问 https://www.python.org/downloads/ 下载最新稳定版（如 3.11.x） 安装时勾选 “Add Python to PATH”  验证安装： 123python --version# 或python3 --version  2.2 包管理工具 pip1234567891011121314151617181920212223...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">过拟合的炸鱼薯条</div><div class="author-info-description">好好学习，天天向上</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Brian-Lin-C"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Brian-Lin-C" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%80%EF%BC%89requests-API-%E8%B0%83%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">Python 常用库（一）requests API 调用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81requests-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">一、requests 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-requests%EF%BC%9F"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 为什么使用 requests？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%AE%89%E8%A3%85%E4%B8%8E%E5%AF%BC%E5%85%A5"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 安装与导入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E7%A1%80%E8%AF%B7%E6%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">二、基础请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-GET-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 GET 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-POST-%E8%AF%B7%E6%B1%82"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 POST 请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%85%B6%E4%BB%96-HTTP-%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 其他 HTTP 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%93%8D%E5%BA%94%E5%A4%84%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">三、响应处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 响应状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 响应内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 下载文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%8E%E8%AE%A4%E8%AF%81"><span class="toc-number">1.4.</span> <span class="toc-text">四、请求头与认证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 自定义请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Basic-%E8%AE%A4%E8%AF%81"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 Basic 认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Token-Bearer-%E8%AE%A4%E8%AF%81"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 Token&#x2F;Bearer 认证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Cookie-%E5%A4%84%E7%90%86"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 Cookie 处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81Session-%E4%BC%9A%E8%AF%9D"><span class="toc-number">1.5.</span> <span class="toc-text">五、Session 会话</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Session-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 Session 基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Session-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 Session 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8A%BF"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 性能优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">1.6.</span> <span class="toc-text">六、异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%B8%B8%E8%A7%81%E5%BC%82%E5%B8%B8"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 常见异常</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 重试机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="toc-number">1.7.</span> <span class="toc-text">七、高级用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%8F%91%E9%80%81-Cookie"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 发送 Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 代理设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E8%AF%B7%E6%B1%82%E5%87%86%E5%A4%87%E4%B8%8E%E5%8F%91%E9%80%81"><span class="toc-number">1.7.4.</span> <span class="toc-text">7.4 请求准备与发送</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%AE%9E%E6%88%98%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.8.</span> <span class="toc-text">八、实战示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E8%B0%83%E7%94%A8-REST-API"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 调用 REST API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 分页数据获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82%EF%BC%88%E9%85%8D%E5%90%88-concurrent-futures%EF%BC%89"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 并发请求（配合 concurrent.futures）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.9.</span> <span class="toc-text">九、最佳实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%BB%83%E4%B9%A0"><span class="toc-number">1.10.</span> <span class="toc-text">十、练习</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/IDE%20%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%EF%BC%9AVS%20Code%20+%20Jupyter%20+%20DataGrip/" title="IDE 工具配置：VS Code + Jupyter + DataGrip">IDE 工具配置：VS Code + Jupyter + DataGrip</a><time datetime="2026-02-24T15:00:00.000Z" title="发表于 2026-02-24 23:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Git%20%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/" title="Git 版本控制与团队协作">Git 版本控制与团队协作</a><time datetime="2026-02-24T14:00:00.000Z" title="发表于 2026-02-24 22:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Linux%20%E4%B8%8E%20Shell%EF%BC%88%E4%BA%8C%EF%BC%89Shell%20%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="Linux 与 Shell（二）Shell 脚本编写">Linux 与 Shell（二）Shell 脚本编写</a><time datetime="2026-02-24T13:00:00.000Z" title="发表于 2026-02-24 21:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Linux%20%E4%B8%8E%20Shell%EF%BC%88%E4%B8%80%EF%BC%89Linux%20%E5%9F%BA%E7%A1%80%E4%B8%8E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="Linux 与 Shell（一）Linux 基础与常用命令">Linux 与 Shell（一）Linux 基础与常用命令</a><time datetime="2026-02-24T12:00:00.000Z" title="发表于 2026-02-24 20:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Python%20%E5%B8%B8%E7%94%A8%E5%BA%93%EF%BC%88%E4%B8%89%EF%BC%89logging%20%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97/" title="Python 常用库（三）logging 日志模块">Python 常用库（三）logging 日志模块</a><time datetime="2026-02-24T11:00:00.000Z" title="发表于 2026-02-24 19:00:00">2026-02-24</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 过拟合的炸鱼薯条</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>