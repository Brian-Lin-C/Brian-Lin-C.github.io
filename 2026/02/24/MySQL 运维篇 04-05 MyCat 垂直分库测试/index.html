<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 运维篇 04-05 MyCat 垂直分库测试 | 过拟合的炸鱼薯条</title><meta name="author" content="过拟合的炸鱼薯条"><meta name="copyright" content="过拟合的炸鱼薯条"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL 运维篇 04-05 MyCat 垂直分库测试完成垂直分库配置后，需要进行全面的测试以验证各库之间的数据隔离和跨库操作是否正常。 一、测试环境1.1 环境信息   组件 配置    MyCat 2.0   MySQL 8.0   主机 1 192.168.1.100 (user_db, order_db)   主机 2 192.168.1.101 (product_db)   1.2 数">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 运维篇 04-05 MyCat 垂直分库测试">
<meta property="og:url" content="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-05%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95/index.html">
<meta property="og:site_name" content="过拟合的炸鱼薯条">
<meta property="og:description" content="MySQL 运维篇 04-05 MyCat 垂直分库测试完成垂直分库配置后，需要进行全面的测试以验证各库之间的数据隔离和跨库操作是否正常。 一、测试环境1.1 环境信息   组件 配置    MyCat 2.0   MySQL 8.0   主机 1 192.168.1.100 (user_db, order_db)   主机 2 192.168.1.101 (product_db)   1.2 数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg">
<meta property="article:published_time" content="2026-02-24T11:40:00.000Z">
<meta property="article:modified_time" content="2026-02-24T11:31:03.770Z">
<meta property="article:author" content="过拟合的炸鱼薯条">
<meta property="article:tag" content="MyCat">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="垂直分库">
<meta property="article:tag" content="测试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 运维篇 04-05 MyCat 垂直分库测试",
  "url": "https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-05%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95/",
  "image": "https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg",
  "datePublished": "2026-02-24T11:40:00.000Z",
  "dateModified": "2026-02-24T11:31:03.770Z",
  "author": [
    {
      "@type": "Person",
      "name": "过拟合的炸鱼薯条",
      "url": "https://brian-lin-c.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-05%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 运维篇 04-05 MyCat 垂直分库测试',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">157</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">过拟合的炸鱼薯条</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 运维篇 04-05 MyCat 垂直分库测试</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 运维篇 04-05 MyCat 垂直分库测试</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-24T11:40:00.000Z" title="发表于 2026-02-24 19:40:00">2026-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-24T11:31:03.770Z" title="更新于 2026-02-24 19:31:03">2026-02-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL-%E8%BF%90%E7%BB%B4%E7%AF%87/">MySQL 运维篇</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MySQL-运维篇-04-05-MyCat-垂直分库测试"><a href="#MySQL-运维篇-04-05-MyCat-垂直分库测试" class="headerlink" title="MySQL 运维篇 04-05 MyCat 垂直分库测试"></a>MySQL 运维篇 04-05 MyCat 垂直分库测试</h1><p>完成垂直分库配置后，需要进行全面的测试以验证各库之间的数据隔离和跨库操作是否正常。</p>
<h2 id="一、测试环境"><a href="#一、测试环境" class="headerlink" title="一、测试环境"></a>一、测试环境</h2><h3 id="1-1-环境信息"><a href="#1-1-环境信息" class="headerlink" title="1.1 环境信息"></a>1.1 环境信息</h3><table>
<thead>
<tr>
<th>组件</th>
<th>配置</th>
</tr>
</thead>
<tbody><tr>
<td>MyCat</td>
<td>2.0</td>
</tr>
<tr>
<td>MySQL</td>
<td>8.0</td>
</tr>
<tr>
<td>主机 1</td>
<td>192.168.1.100 (user_db, order_db)</td>
</tr>
<tr>
<td>主机 2</td>
<td>192.168.1.101 (product_db)</td>
</tr>
</tbody></table>
<h3 id="1-2-数据库结构"><a href="#1-2-数据库结构" class="headerlink" title="1.2 数据库结构"></a>1.2 数据库结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mall_db (逻辑库)</span><br><span class="line">├── users (user_db)</span><br><span class="line">├── user_profile (user_db)</span><br><span class="line">├── orders (order_db)</span><br><span class="line">├── order_detail (order_db)</span><br><span class="line">├── products (product_db)</span><br><span class="line">└── category (product_db)</span><br></pre></td></tr></table></figure>

<h2 id="二、基础功能测试"><a href="#二、基础功能测试" class="headerlink" title="二、基础功能测试"></a>二、基础功能测试</h2><h3 id="2-1-连接测试"><a href="#2-1-连接测试" class="headerlink" title="2.1 连接测试"></a>2.1 连接测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连接 MyCat</span></span><br><span class="line">mysql -h 127.0.0.1 -P 8066 -u root -p123456</span><br></pre></td></tr></table></figure>

<h3 id="2-2-查看表"><a href="#2-2-查看表" class="headerlink" title="2.2 查看表"></a>2.2 查看表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">USE mall_db;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看所有表</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 预期输出：</span></span><br><span class="line"># <span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"># <span class="operator">|</span> Tables_in_mall_db <span class="operator">|</span></span><br><span class="line"># <span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"># <span class="operator">|</span> users            <span class="operator">|</span></span><br><span class="line"># <span class="operator">|</span> user_profile     <span class="operator">|</span></span><br><span class="line"># <span class="operator">|</span> orders           <span class="operator">|</span></span><br><span class="line"># <span class="operator">|</span> order_detail     <span class="operator">|</span></span><br><span class="line"># <span class="operator">|</span> products         <span class="operator">|</span></span><br><span class="line"># <span class="operator">|</span> category         <span class="operator">|</span></span><br><span class="line"># <span class="operator">+</span><span class="comment">------------------+</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-表结构查看"><a href="#2-3-表结构查看" class="headerlink" title="2.3 表结构查看"></a>2.3 表结构查看</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看用户表结构</span></span><br><span class="line"><span class="keyword">DESC</span> users;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看订单表结构</span></span><br><span class="line"><span class="keyword">DESC</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看商品表结构</span></span><br><span class="line"><span class="keyword">DESC</span> products;</span><br></pre></td></tr></table></figure>

<h2 id="三、单库操作测试"><a href="#三、单库操作测试" class="headerlink" title="三、单库操作测试"></a>三、单库操作测试</h2><h3 id="3-1-用户库测试"><a href="#3-1-用户库测试" class="headerlink" title="3.1 用户库测试"></a>3.1 用户库测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入用户</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (id, username, email, created_at)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;zhang@example.com&#x27;</span>, NOW());</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (id, username, email, created_at)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;li@example.com&#x27;</span>, NOW());</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入用户详情</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> user_profile (user_id, nickname, avatar)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;/avatar/1.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> user_profile (user_id, nickname, avatar)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;/avatar/2.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询用户详情</span></span><br><span class="line"><span class="keyword">SELECT</span> u.<span class="operator">*</span>, p.nickname, p.avatar</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">JOIN</span> user_profile p <span class="keyword">ON</span> u.id <span class="operator">=</span> p.user_id;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-订单库测试"><a href="#3-2-订单库测试" class="headerlink" title="3.2 订单库测试"></a>3.2 订单库测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入订单</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount, created_at)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;ORD001&#x27;</span>, <span class="number">1</span>, <span class="number">199.99</span>, NOW());</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount, created_at)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;ORD002&#x27;</span>, <span class="number">2</span>, <span class="number">299.99</span>, NOW());</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入订单明细</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> order_detail (id, order_id, product_id, quantity, price)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">99.99</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> order_detail (id, order_id, product_id, quantity, price)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">299.99</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询订单</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询订单明细</span></span><br><span class="line"><span class="keyword">SELECT</span> o.order_no, od.product_id, od.quantity, od.price</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> order_detail od <span class="keyword">ON</span> o.id <span class="operator">=</span> od.order_id;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-商品库测试"><a href="#3-3-商品库测试" class="headerlink" title="3.3 商品库测试"></a>3.3 商品库测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入商品</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> products (id, name, price, stock)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;iPhone 15&#x27;</span>, <span class="number">7999.00</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> products (id, name, price, stock)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;MacBook Pro&#x27;</span>, <span class="number">14999.00</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入分类</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> category (id, name, parent_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;手机&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> category (id, name, parent_id)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;电脑&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询商品</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询分类</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> category;</span><br></pre></td></tr></table></figure>

<h2 id="四、跨库-JOIN-测试"><a href="#四、跨库-JOIN-测试" class="headerlink" title="四、跨库 JOIN 测试"></a>四、跨库 JOIN 测试</h2><h3 id="4-1-两库-JOIN"><a href="#4-1-两库-JOIN" class="headerlink" title="4.1 两库 JOIN"></a>4.1 两库 JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户 + 订单</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    o.id <span class="keyword">AS</span> order_id,</span><br><span class="line">    o.order_no,</span><br><span class="line">    o.amount,</span><br><span class="line">    u.username,</span><br><span class="line">    u.email</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 预期结果：</span></span><br><span class="line"># order_id <span class="operator">|</span> order_no <span class="operator">|</span> amount  <span class="operator">|</span> username <span class="operator">|</span> email</span><br><span class="line"># <span class="number">1</span>        <span class="operator">|</span> ORD001   <span class="operator">|</span> <span class="number">199.99</span>  <span class="operator">|</span> zhangsan <span class="operator">|</span> zhang<span class="variable">@example</span>.com</span><br><span class="line"># <span class="number">2</span>        <span class="operator">|</span> ORD002   <span class="operator">|</span> <span class="number">299.99</span>  <span class="operator">|</span> lisi     <span class="operator">|</span> li<span class="variable">@example</span>.com</span><br></pre></td></tr></table></figure>

<h3 id="4-2-三库-JOIN"><a href="#4-2-三库-JOIN" class="headerlink" title="4.2 三库 JOIN"></a>4.2 三库 JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 订单 + 用户 + 商品</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    o.order_no,</span><br><span class="line">    u.username,</span><br><span class="line">    p.name <span class="keyword">AS</span> product_name,</span><br><span class="line">    p.price,</span><br><span class="line">    od.quantity,</span><br><span class="line">    od.quantity <span class="operator">*</span> p.price <span class="keyword">AS</span> total</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id</span><br><span class="line"><span class="keyword">JOIN</span> order_detail od <span class="keyword">ON</span> o.id <span class="operator">=</span> od.order_id</span><br><span class="line"><span class="keyword">JOIN</span> products p <span class="keyword">ON</span> od.product_id <span class="operator">=</span> p.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 预期结果：</span></span><br><span class="line"># order_no <span class="operator">|</span> username <span class="operator">|</span> product_name  <span class="operator">|</span> price   <span class="operator">|</span> quantity <span class="operator">|</span> total</span><br><span class="line"># ORD001   <span class="operator">|</span> zhangsan <span class="operator">|</span> iPhone <span class="number">15</span>     <span class="operator">|</span> <span class="number">7999.00</span> <span class="operator">|</span> <span class="number">2</span>        <span class="operator">|</span> <span class="number">15998.00</span></span><br><span class="line"># ORD002   <span class="operator">|</span> lisi     <span class="operator">|</span> MacBook Pro   <span class="operator">|</span> <span class="number">14999.00</span><span class="operator">|</span> <span class="number">1</span>        <span class="operator">|</span> <span class="number">14999.00</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-复杂查询"><a href="#4-3-复杂查询" class="headerlink" title="4.3 复杂查询"></a>4.3 复杂查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 统计各用户的订单金额</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    u.username,</span><br><span class="line">    <span class="built_in">COUNT</span>(o.id) <span class="keyword">AS</span> order_count,</span><br><span class="line">    <span class="built_in">SUM</span>(o.amount) <span class="keyword">AS</span> total_amount</span><br><span class="line"><span class="keyword">FROM</span> users u</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> orders o <span class="keyword">ON</span> u.id <span class="operator">=</span> o.user_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> u.id, u.username;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 统计各商品的销售量</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    p.name,</span><br><span class="line">    <span class="built_in">SUM</span>(od.quantity) <span class="keyword">AS</span> total_quantity</span><br><span class="line"><span class="keyword">FROM</span> products p</span><br><span class="line"><span class="keyword">JOIN</span> order_detail od <span class="keyword">ON</span> p.id <span class="operator">=</span> od.product_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> p.id, p.name;</span><br></pre></td></tr></table></figure>

<h2 id="五、事务测试"><a href="#五、事务测试" class="headerlink" title="五、事务测试"></a>五、事务测试</h2><h3 id="5-1-单库事务"><a href="#5-1-单库事务" class="headerlink" title="5.1 单库事务"></a>5.1 单库事务</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户库事务</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (id, username, email) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;wang@example.com&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT INTO</span> user_profile (user_id, nickname, avatar) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;/avatar/3.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 验证</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-跨库事务"><a href="#5-2-跨库事务" class="headerlink" title="5.2 跨库事务"></a>5.2 跨库事务</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 跨库事务（创建用户和订单）</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户库</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (id, username, email) <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;zhaoliu&#x27;</span>, <span class="string">&#x27;zhao@example.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单库</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;ORD003&#x27;</span>, <span class="number">4</span>, <span class="number">399.99</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 验证</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：跨库事务的支持取决于 MyCat 版本和配置。</p>
<h2 id="六、数据分布验证"><a href="#六、数据分布验证" class="headerlink" title="六、数据分布验证"></a>六、数据分布验证</h2><h3 id="6-1-查看物理数据"><a href="#6-1-查看物理数据" class="headerlink" title="6.1 查看物理数据"></a>6.1 查看物理数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 user_db 验证</span></span><br><span class="line">mysql -u mycat -p -h 192.168.1.100</span><br><span class="line">USE user_db;</span><br><span class="line">SHOW TABLES;</span><br><span class="line">SELECT * FROM <span class="built_in">users</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 order_db 验证</span></span><br><span class="line">USE order_db;</span><br><span class="line">SHOW TABLES;</span><br><span class="line">SELECT * FROM orders;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 product_db 验证</span></span><br><span class="line">mysql -u mycat -p -h 192.168.1.101</span><br><span class="line">USE product_db;</span><br><span class="line">SHOW TABLES;</span><br><span class="line">SELECT * FROM products;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-数据一致性检查"><a href="#6-2-数据一致性检查" class="headerlink" title="6.2 数据一致性检查"></a>6.2 数据一致性检查</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在 MyCat 查询总数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> users;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在物理库查询总数</span></span><br><span class="line"><span class="comment">-- 验证数据一致</span></span><br></pre></td></tr></table></figure>

<h2 id="七、性能测试"><a href="#七、性能测试" class="headerlink" title="七、性能测试"></a>七、性能测试</h2><h3 id="7-1-单库查询性能"><a href="#7-1-单库查询性能" class="headerlink" title="7.1 单库查询性能"></a>7.1 单库查询性能</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用户库查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 订单库查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 商品库查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-跨库查询性能"><a href="#7-2-跨库查询性能" class="headerlink" title="7.2 跨库查询性能"></a>7.2 跨库查询性能</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 两库 JOIN 计时</span></span><br><span class="line"><span class="keyword">SELECT</span> SQL_NO_CACHE</span><br><span class="line">    o.order_no, u.username</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id</span><br><span class="line"><span class="keyword">WHERE</span> o.id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 三库 JOIN 计时</span></span><br><span class="line"><span class="keyword">SELECT</span> SQL_NO_CACHE</span><br><span class="line">    o.order_no, u.username, p.name</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> users u <span class="keyword">ON</span> o.user_id <span class="operator">=</span> u.id</span><br><span class="line"><span class="keyword">JOIN</span> order_detail od <span class="keyword">ON</span> o.id <span class="operator">=</span> od.order_id</span><br><span class="line"><span class="keyword">JOIN</span> products p <span class="keyword">ON</span> od.product_id <span class="operator">=</span> p.id</span><br><span class="line"><span class="keyword">WHERE</span> o.id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-批量插入测试"><a href="#7-3-批量插入测试" class="headerlink" title="7.3 批量插入测试"></a>7.3 批量插入测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 批量插入用户</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> batch_insert_users(<span class="keyword">IN</span> count <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">    WHILE i <span class="operator">&lt;=</span> count DO</span><br><span class="line">        <span class="keyword">INSERT INTO</span> users (id, username, email)</span><br><span class="line">        <span class="keyword">VALUES</span> (i <span class="operator">+</span> <span class="number">100</span>, CONCAT(<span class="string">&#x27;user_&#x27;</span>, i), CONCAT(<span class="string">&#x27;user&#x27;</span>, i, <span class="string">&#x27;@example.com&#x27;</span>));</span><br><span class="line">        <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> batch_insert_users(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="八、监控测试"><a href="#八、监控测试" class="headerlink" title="八、监控测试"></a>八、监控测试</h2><h3 id="8-1-查看-MyCat-状态"><a href="#8-1-查看-MyCat-状态" class="headerlink" title="8.1 查看 MyCat 状态"></a>8.1 查看 MyCat 状态</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看服务器状态</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@SERVER</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看数据源状态</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@DATASOURCE</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看各库连接数</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@CONNECTIONPOOL</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-查看-SQL-统计"><a href="#8-2-查看-SQL-统计" class="headerlink" title="8.2 查看 SQL 统计"></a>8.2 查看 SQL 统计</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看 SQL 执行统计</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@SQL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看慢查询</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@SLOW</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-查看各库状态"><a href="#8-3-查看各库状态" class="headerlink" title="8.3 查看各库状态"></a>8.3 查看各库状态</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看 user_db 状态</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> information_schema.SCHEMATA <span class="keyword">WHERE</span> SCHEMA_NAME <span class="operator">=</span> <span class="string">&#x27;user_db&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看各数据源</span></span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@DATASOURCE</span> <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;dn_user&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@DATASOURCE</span> <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;dn_order&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> @<span class="variable">@DATASOURCE</span> <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;dn_product&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="九、故障测试"><a href="#九、故障测试" class="headerlink" title="九、故障测试"></a>九、故障测试</h2><h3 id="9-1-单库故障"><a href="#9-1-单库故障" class="headerlink" title="9.1 单库故障"></a>9.1 单库故障</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止 product_db 所在的主机</span></span><br><span class="line"><span class="comment"># 在 MyCat 查看状态</span></span><br><span class="line"></span><br><span class="line">SHOW @@DATASOURCE;</span><br><span class="line"><span class="comment"># dn_product 应该显示连接失败</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试查询</span></span><br><span class="line">SELECT * FROM products;</span><br><span class="line"><span class="comment"># 应该报错或超时</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复后</span></span><br><span class="line">SHOW @@DATASOURCE;</span><br><span class="line"><span class="comment"># 应该自动重连</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2-恢复测试"><a href="#9-2-恢复测试" class="headerlink" title="9.2 恢复测试"></a>9.2 恢复测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启 MySQL</span></span><br><span class="line">systemctl start mysqld</span><br><span class="line"></span><br><span class="line"><span class="comment"># MyCat 应该自动重连</span></span><br><span class="line">SHOW @@DATASOURCE;</span><br></pre></td></tr></table></figure>

<h2 id="十、测试检查清单"><a href="#十、测试检查清单" class="headerlink" title="十、测试检查清单"></a>十、测试检查清单</h2><h3 id="10-1-功能测试"><a href="#10-1-功能测试" class="headerlink" title="10.1 功能测试"></a>10.1 功能测试</h3><ul>
<li><input disabled="" type="checkbox"> 单库 CRUD 正常</li>
<li><input disabled="" type="checkbox"> 跨库 JOIN 正常</li>
<li><input disabled="" type="checkbox"> 跨库事务正常</li>
<li><input disabled="" type="checkbox"> 数据分布正确</li>
</ul>
<h3 id="10-2-性能测试"><a href="#10-2-性能测试" class="headerlink" title="10.2 性能测试"></a>10.2 性能测试</h3><ul>
<li><input disabled="" type="checkbox"> 单库查询性能</li>
<li><input disabled="" type="checkbox"> 跨库查询性能</li>
<li><input disabled="" type="checkbox"> 批量插入性能</li>
</ul>
<h3 id="10-3-监控测试"><a href="#10-3-监控测试" class="headerlink" title="10.3 监控测试"></a>10.3 监控测试</h3><ul>
<li><input disabled="" type="checkbox"> 服务器状态正常</li>
<li><input disabled="" type="checkbox"> 数据源状态正常</li>
<li><input disabled="" type="checkbox"> SQL 统计正常</li>
</ul>
<h3 id="10-4-故障测试"><a href="#10-4-故障测试" class="headerlink" title="10.4 故障测试"></a>10.4 故障测试</h3><ul>
<li><input disabled="" type="checkbox"> 单库故障检测</li>
<li><input disabled="" type="checkbox"> 自动重连正常</li>
</ul>
<h2 id="十一、小结"><a href="#十一、小结" class="headerlink" title="十一、小结"></a>十一、小结</h2><h3 id="测试总结"><a href="#测试总结" class="headerlink" title="测试总结"></a>测试总结</h3><p>通过上述测试，验证了 MyCat 垂直分库的以下功能：</p>
<ol>
<li><strong>单库操作</strong>：各库 CRUD 正常</li>
<li><strong>跨库 JOIN</strong>：MyCat 自动处理跨库 JOIN</li>
<li><strong>数据隔离</strong>：各库数据独立存储</li>
<li><strong>监控功能</strong>：可以查看各库状态</li>
</ol>
<h3 id="垂直分库适用场景"><a href="#垂直分库适用场景" class="headerlink" title="垂直分库适用场景"></a>垂直分库适用场景</h3><table>
<thead>
<tr>
<th>场景</th>
<th>推荐</th>
</tr>
</thead>
<tbody><tr>
<td>业务模块清晰</td>
<td>✓</td>
</tr>
<tr>
<td>表数量过多</td>
<td>✓</td>
</tr>
<tr>
<td>需要独立扩展</td>
<td>✓</td>
</tr>
<tr>
<td>频繁跨库 JOIN</td>
<td>✗</td>
</tr>
</tbody></table>
<hr>
<p><strong>下一篇</strong>：[MySQL 运维篇 04-06 MyCat 水平分表](&#x2F;2026&#x2F;02&#x2F;24&#x2F;MySQL 运维篇 04-06 MyCat 水平分表&#x2F;)</p>
<p><strong>上一篇</strong>：[MySQL 运维篇 04-04 MyCat 垂直分库](&#x2F;2026&#x2F;02&#x2F;24&#x2F;MySQL 运维篇 04-04 MyCat 垂直分库&#x2F;)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io">过拟合的炸鱼薯条</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-05%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95/">https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-05%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://brian-lin-c.github.io" target="_blank">过拟合的炸鱼薯条</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/MyCat/">MyCat</a><a class="post-meta__tags" href="/tags/%E6%B5%8B%E8%AF%95/">测试</a><a class="post-meta__tags" href="/tags/%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93/">垂直分库</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-06%20MyCat%20%E6%B0%B4%E5%B9%B3%E5%88%86%E8%A1%A8/" title="MySQL 运维篇 04-06 MyCat 水平分表"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">MySQL 运维篇 04-06 MyCat 水平分表</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-06 MyCat 水平分表水平分表是将一个大表的数据按照某种规则分布到多个表中。本文将介绍如何使用 MyCat 实现水平分表。 一、水平分表介绍1.1 什么是水平分表水平分表：将同一个表的数据按照行拆分到多个物理表中。 12345678原始表：orders (1 亿条数据)水平分表后：orders_0000 (250 万条)orders_0001 (250 万条)orders_0002 (250 万条)orders_0003 (250 万条)  1.2 适用场景   场景 说明    单表数据量大 超过 1000 万行   查询性能下降 索引效率低   维护困难 DDL 操作耗时过长   1.3 分片规则   规则 说明 适用场景    取模 id % 分片数 均匀分布   范围 按 ID 或日期范围 历史数据归档   哈希 hash(key) % 分片数 随机分布   二、环境准备2.1 数据库规划12345order_db├── orders_0000├── orders_0001├── orders_0002└── orders_0003  2.2...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-04%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93/" title="MySQL 运维篇 04-04 MyCat 垂直分库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQL 运维篇 04-04 MyCat 垂直分库</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-04 MyCat 垂直分库垂直分库是将不同的业务表分布到不同的数据库中。本文将介绍如何使用 MyCat 实现垂直分库。 一、垂直分库介绍1.1 什么是垂直分库垂直分库：按照业务模块将表拆分到不同的数据库中。 1234567原始架构：single_db (users, orders, products, logs, ...)垂直分库后：user_db (users, user_profile, user_login, ...)order_db (orders, order_detail, order_log, ...)product_db (products, category, brand, ...)  1.2 适用场景   场景 说明    业务模块清晰 各模块相对独立   表数量过多 单库表数量超过 100   访问量差异大 热门表和冷门表分离   团队分工 不同团队负责不同模块   1.3 优缺点优点：  业务清晰，便于管理 减少单库压力 便于水平扩展  缺点：  跨库 JOIN 复杂 事务处理困难 增加运维成本  二、环境准备2.1 数据库规划 ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-02%20MyCat%20%E6%B5%8B%E8%AF%95/" title="MySQL 运维篇 04-02 MyCat 测试"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-02 MyCat 测试</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-02 MyCat 测试完成 MyCat 配置后，需要进行全面的测试以验证分库分表功能是否正常。本文将介绍各种测试场景。 一、连接测试1.1 基本连接12# 使用 MySQL 客户端连接 MyCatmysql -h 127.0.0.1 -P 8066 -u root -p123456  1.2 查看数据库1234-- 查看逻辑数据库SHOW DATABASES;-- 输出应该包含 testdb  1.3 查看表123456USE testdb;-- 查看逻辑表SHOW TABLES;-- 输出应该包含 orders  二、CRUD 测试2.1 插入测试123456789101112USE testdb;-- 插入单条记录INSERT INTO orders (id, order_no, user_id, amount, status)VALUES (1, &#x27;ORD001&#x27;, 100, 199.99, 1);-- 插入多条记录INSERT INTO orders (id, order_no, user_id, amount, status...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-04%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93/" title="MySQL 运维篇 04-04 MyCat 垂直分库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-04 MyCat 垂直分库</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-04 MyCat 垂直分库垂直分库是将不同的业务表分布到不同的数据库中。本文将介绍如何使用 MyCat 实现垂直分库。 一、垂直分库介绍1.1 什么是垂直分库垂直分库：按照业务模块将表拆分到不同的数据库中。 1234567原始架构：single_db (users, orders, products, logs, ...)垂直分库后：user_db (users, user_profile, user_login, ...)order_db (orders, order_detail, order_log, ...)product_db (products, category, brand, ...)  1.2 适用场景   场景 说明    业务模块清晰 各模块相对独立   表数量过多 单库表数量超过 100   访问量差异大 热门表和冷门表分离   团队分工 不同团队负责不同模块   1.3 优缺点优点：  业务清晰，便于管理 减少单库压力 便于水平扩展  缺点：  跨库 JOIN 复杂 事务处理困难 增加运维成本  二、环境准备2.1 数据库规划 ...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/" title="MySQL 运维篇 04-08 MyCat 取模分片"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-08 MyCat 取模分片</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-08 MyCat 取模分片取模分片是最常用的分片方式，按照分片键对分片数取模来路由数据。本文将详细介绍取模分片的配置和使用。 一、取模分片介绍1.1 什么是取模分片取模分片：根据分片键对分片数量取模来确定数据存储位置。 12345678公式：分片索引 = 分片键 % 分片数量示例（4 个分片）：id=1 → 1%4=1 → 分片 1id=2 → 2%4=2 → 分片 2id=3 → 3%4=3 → 分片 3id=4 → 4%4=0 → 分片 0id=5 → 5%4=1 → 分片 1  1.2 适用场景   场景 说明    用户订单 按 user_id 取模   用户数据 按用户 ID 取模   均匀分布 需要数据均匀分布   1.3 优缺点优点：  数据分布均匀 算法简单高效 查询效率高  缺点：  扩容困难（需要 rehash） 范围查询效率低  二、基础配置2.1 rule.yml12345678910tableRules:  - name: mod-long    function: mod-long    columns: idfunction...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-01%20MyCat%20%E5%85%A5%E9%97%A8/" title="MySQL 运维篇 04-01 MyCat 入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-01 MyCat 入门</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-01 MyCat 入门本文是 MyCat 分库分表的入门教程，将介绍如何使用 MyCat 实现简单的分库分表功能。 一、MyCat 简介1.1 什么是 MyCatMyCat 是一个数据库中间件层，位于应用程序和 MySQL 数据库之间，提供分库分表、读写分离等功能。 1应用程序 → MyCat (中间件) → MySQL 集群  1.2 MyCat 功能   功能 说明    分库分表 将数据分布到多个库&#x2F;表中   读写分离 自动将读请求路由到从库   SQL 路由 根据规则路由 SQL 到对应节点   结果合并 合并多个分片的查询结果   连接池 管理数据库连接   1.3 MyCat 版本 MyCat 1.x：经典版本，稳定 MyCat 2.x：重构版本，性能更好  二、快速开始2.1 环境准备软件版本：  MyCat 2.0 MySQL 8.0 JDK 1.8+  服务器：    服务器 IP 角色    server1 192.168.1.100 MyCat + MySQL   2.2 目录结构123456789/opt/mycat/├...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2003-03%20%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%20MyCat%20%E6%A6%82%E8%BF%B0/" title="MySQL 运维篇 03-03 分库分表 MyCat 概述"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 03-03 分库分表 MyCat 概述</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 03-03 分库分表 MyCat 概述MyCat 是一个开源的数据库中间件，位于应用程序和数据库之间，负责 SQL 解析、路由和结果合并。本文将介绍 MyCat 的基本概念、架构和核心功能。 一、MyCat 介绍1.1 什么是 MyCat？MyCat 是一个基于 Java 开发的数据库中间件，前身是阿里巴巴的 Cobar 项目。 12应用程序 → MyCat → MySQL 集群         (数据库中间件)  核心功能：  SQL 解析和路由 分库分表 读写分离 连接池管理 负载均衡  1.2 MyCat 特点   特点 说明    协议兼容 完全兼容 MySQL 协议   透明分片 应用无需修改代码   多种分片 支持 10+ 种分片规则   读写分离 自动路由读写请求   高可用 支持主从切换   1.3 适用场景   场景 说明    分库分表 单表数据量过大   读写分离 读多写少场景   数据库迁移 平滑迁移数据   多租户 SaaS 应用数据隔离   二、MyCat 架构2.1 整体架构1应用程序 → MyCat → MySQL 集群  核心...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-03%20MyCat%20%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/" title="MySQL 运维篇 04-03 MyCat 配置详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-03 MyCat 配置详解</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-03 MyCat 配置详解本文将详细讲解 MyCat 的各个配置文件，包括 server.yml、schema.yml、datasource.yml 和 rule.yml 的完整配置说明。 一、配置文件概述1.1 配置文件位置1234567/opt/mycat/conf/├── server.yml         # 主配置文件├── schema.yml         # Schema 配置├── datasource.yml     # 数据源配置├── rule.yml           # 分片规则配置├── sequence.yml       # 全局序列配置└── log4j2.xml         # 日志配置  1.2 配置加载顺序12341. server.yml (系统配置)2. datasource.yml (数据源)3. schema.yml (Schema 和表)4. rule.yml (分片规则)  二、server.yml 详解2.1 完整配置示例1234567891011121314151617181920212...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">过拟合的炸鱼薯条</div><div class="author-info-description">好好学习，天天向上</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">157</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Brian-Lin-C"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Brian-Lin-C" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E8%BF%90%E7%BB%B4%E7%AF%87-04-05-MyCat-%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E6%B5%8B%E8%AF%95"><span class="toc-number">1.</span> <span class="toc-text">MySQL 运维篇 04-05 MyCat 垂直分库测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">一、测试环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 环境信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 数据库结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.</span> <span class="toc-text">二、基础功能测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 连接测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%9F%A5%E7%9C%8B%E8%A1%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 查看表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E8%A1%A8%E7%BB%93%E6%9E%84%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 表结构查看</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%8D%95%E5%BA%93%E6%93%8D%E4%BD%9C%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">三、单库操作测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%94%A8%E6%88%B7%E5%BA%93%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 用户库测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%AE%A2%E5%8D%95%E5%BA%93%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 订单库测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%95%86%E5%93%81%E5%BA%93%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 商品库测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%B7%A8%E5%BA%93-JOIN-%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.</span> <span class="toc-text">四、跨库 JOIN 测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%A4%E5%BA%93-JOIN"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 两库 JOIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E4%B8%89%E5%BA%93-JOIN"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 三库 JOIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 复杂查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BA%8B%E5%8A%A1%E6%B5%8B%E8%AF%95"><span class="toc-number">1.5.</span> <span class="toc-text">五、事务测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%8D%95%E5%BA%93%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 单库事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%B7%A8%E5%BA%93%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 跨库事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83%E9%AA%8C%E8%AF%81"><span class="toc-number">1.6.</span> <span class="toc-text">六、数据分布验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%9F%A5%E7%9C%8B%E7%89%A9%E7%90%86%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 查看物理数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7%E6%A3%80%E6%9F%A5"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 数据一致性检查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.7.</span> <span class="toc-text">七、性能测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%8D%95%E5%BA%93%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 单库查询性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%B7%A8%E5%BA%93%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 跨库查询性能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%B5%8B%E8%AF%95"><span class="toc-number">1.7.3.</span> <span class="toc-text">7.3 批量插入测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E7%9B%91%E6%8E%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">1.8.</span> <span class="toc-text">八、监控测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E6%9F%A5%E7%9C%8B-MyCat-%E7%8A%B6%E6%80%81"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 查看 MyCat 状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%9F%A5%E7%9C%8B-SQL-%E7%BB%9F%E8%AE%A1"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 查看 SQL 统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E6%9F%A5%E7%9C%8B%E5%90%84%E5%BA%93%E7%8A%B6%E6%80%81"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 查看各库状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E6%95%85%E9%9A%9C%E6%B5%8B%E8%AF%95"><span class="toc-number">1.9.</span> <span class="toc-text">九、故障测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%8D%95%E5%BA%93%E6%95%85%E9%9A%9C"><span class="toc-number">1.9.1.</span> <span class="toc-text">9.1 单库故障</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E6%81%A2%E5%A4%8D%E6%B5%8B%E8%AF%95"><span class="toc-number">1.9.2.</span> <span class="toc-text">9.2 恢复测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%B5%8B%E8%AF%95%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95"><span class="toc-number">1.10.</span> <span class="toc-text">十、测试检查清单</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.10.1.</span> <span class="toc-text">10.1 功能测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.10.2.</span> <span class="toc-text">10.2 性能测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E7%9B%91%E6%8E%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">1.10.3.</span> <span class="toc-text">10.3 监控测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E6%95%85%E9%9A%9C%E6%B5%8B%E8%AF%95"><span class="toc-number">1.10.4.</span> <span class="toc-text">10.4 故障测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">1.11.</span> <span class="toc-text">十一、小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%80%BB%E7%BB%93"><span class="toc-number">1.11.1.</span> <span class="toc-text">测试总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.11.2.</span> <span class="toc-text">垂直分库适用场景</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/IDE%20%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%EF%BC%9AVS%20Code%20+%20Jupyter%20+%20DataGrip/" title="IDE 工具配置：VS Code + Jupyter + DataGrip">IDE 工具配置：VS Code + Jupyter + DataGrip</a><time datetime="2026-02-24T15:00:00.000Z" title="发表于 2026-02-24 23:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Git%20%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/" title="Git 版本控制与团队协作">Git 版本控制与团队协作</a><time datetime="2026-02-24T14:00:00.000Z" title="发表于 2026-02-24 22:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Linux%20%E4%B8%8E%20Shell%EF%BC%88%E4%BA%8C%EF%BC%89Shell%20%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="Linux 与 Shell（二）Shell 脚本编写">Linux 与 Shell（二）Shell 脚本编写</a><time datetime="2026-02-24T13:00:00.000Z" title="发表于 2026-02-24 21:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3%20-%20%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E3%80%81%E6%95%B0%E6%8D%AE%E5%88%86%E5%B1%82%E4%B8%8E%20SCD%20%E5%A4%84%E7%90%86/" title="数据仓库核心概念详解 - 维度建模、数据分层与 SCD 处理">数据仓库核心概念详解 - 维度建模、数据分层与 SCD 处理</a><time datetime="2026-02-24T13:00:00.000Z" title="发表于 2026-02-24 21:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-10%20MyCat%20%E7%AE%A1%E7%90%86%E4%B8%8E%E7%9B%91%E6%8E%A7/" title="MySQL 运维篇 04-10 MyCat 管理与监控">MySQL 运维篇 04-10 MyCat 管理与监控</a><time datetime="2026-02-24T12:05:00.000Z" title="发表于 2026-02-24 20:05:00">2026-02-24</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 过拟合的炸鱼薯条</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>