<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>MySQL 运维篇 04-08 MyCat 取模分片 | 过拟合的炸鱼薯条</title><meta name="author" content="过拟合的炸鱼薯条"><meta name="copyright" content="过拟合的炸鱼薯条"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL 运维篇 04-08 MyCat 取模分片取模分片是最常用的分片方式，按照分片键对分片数取模来路由数据。本文将详细介绍取模分片的配置和使用。 一、取模分片介绍1.1 什么是取模分片取模分片：根据分片键对分片数量取模来确定数据存储位置。 12345678公式：分片索引 &#x3D; 分片键 % 分片数量示例（4 个分片）：id&#x3D;1 → 1%4&#x3D;1 → 分片 1id&#x3D;2 → 2%4&#x3D;2 → 分片 2i">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 运维篇 04-08 MyCat 取模分片">
<meta property="og:url" content="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/index.html">
<meta property="og:site_name" content="过拟合的炸鱼薯条">
<meta property="og:description" content="MySQL 运维篇 04-08 MyCat 取模分片取模分片是最常用的分片方式，按照分片键对分片数取模来路由数据。本文将详细介绍取模分片的配置和使用。 一、取模分片介绍1.1 什么是取模分片取模分片：根据分片键对分片数量取模来确定数据存储位置。 12345678公式：分片索引 &#x3D; 分片键 % 分片数量示例（4 个分片）：id&#x3D;1 → 1%4&#x3D;1 → 分片 1id&#x3D;2 → 2%4&#x3D;2 → 分片 2i">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg">
<meta property="article:published_time" content="2026-02-24T11:55:00.000Z">
<meta property="article:modified_time" content="2026-02-24T11:35:07.889Z">
<meta property="article:author" content="过拟合的炸鱼薯条">
<meta property="article:tag" content="MyCat">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="取模分片">
<meta property="article:tag" content="实战">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "MySQL 运维篇 04-08 MyCat 取模分片",
  "url": "https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/",
  "image": "https://brian-lin-c.github.io/img/%E5%A4%B4%E5%83%8F.jpg",
  "datePublished": "2026-02-24T11:55:00.000Z",
  "dateModified": "2026-02-24T11:35:07.889Z",
  "author": [
    {
      "@type": "Person",
      "name": "过拟合的炸鱼薯条",
      "url": "https://brian-lin-c.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.4"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.13.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL 运维篇 04-08 MyCat 取模分片',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">157</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">过拟合的炸鱼薯条</span></a><a class="nav-page-title" href="/"><span class="site-name">MySQL 运维篇 04-08 MyCat 取模分片</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 运维篇 04-08 MyCat 取模分片</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-24T11:55:00.000Z" title="发表于 2026-02-24 19:55:00">2026-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-24T11:35:07.889Z" title="更新于 2026-02-24 19:35:07">2026-02-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL-%E8%BF%90%E7%BB%B4%E7%AF%87/">MySQL 运维篇</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>6分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MySQL-运维篇-04-08-MyCat-取模分片"><a href="#MySQL-运维篇-04-08-MyCat-取模分片" class="headerlink" title="MySQL 运维篇 04-08 MyCat 取模分片"></a>MySQL 运维篇 04-08 MyCat 取模分片</h1><p>取模分片是最常用的分片方式，按照分片键对分片数取模来路由数据。本文将详细介绍取模分片的配置和使用。</p>
<h2 id="一、取模分片介绍"><a href="#一、取模分片介绍" class="headerlink" title="一、取模分片介绍"></a>一、取模分片介绍</h2><h3 id="1-1-什么是取模分片"><a href="#1-1-什么是取模分片" class="headerlink" title="1.1 什么是取模分片"></a>1.1 什么是取模分片</h3><p><strong>取模分片</strong>：根据分片键对分片数量取模来确定数据存储位置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">公式：分片索引 = 分片键 % 分片数量</span><br><span class="line"></span><br><span class="line">示例（4 个分片）：</span><br><span class="line">id=1 → 1%4=1 → 分片 1</span><br><span class="line">id=2 → 2%4=2 → 分片 2</span><br><span class="line">id=3 → 3%4=3 → 分片 3</span><br><span class="line">id=4 → 4%4=0 → 分片 0</span><br><span class="line">id=5 → 5%4=1 → 分片 1</span><br></pre></td></tr></table></figure>

<h3 id="1-2-适用场景"><a href="#1-2-适用场景" class="headerlink" title="1.2 适用场景"></a>1.2 适用场景</h3><table>
<thead>
<tr>
<th>场景</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>用户订单</td>
<td>按 user_id 取模</td>
</tr>
<tr>
<td>用户数据</td>
<td>按用户 ID 取模</td>
</tr>
<tr>
<td>均匀分布</td>
<td>需要数据均匀分布</td>
</tr>
</tbody></table>
<h3 id="1-3-优缺点"><a href="#1-3-优缺点" class="headerlink" title="1.3 优缺点"></a>1.3 优缺点</h3><p><strong>优点</strong>：</p>
<ul>
<li>数据分布均匀</li>
<li>算法简单高效</li>
<li>查询效率高</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>扩容困难（需要 rehash）</li>
<li>范围查询效率低</li>
</ul>
<h2 id="二、基础配置"><a href="#二、基础配置" class="headerlink" title="二、基础配置"></a>二、基础配置</h2><h3 id="2-1-rule-yml"><a href="#2-1-rule-yml" class="headerlink" title="2.1 rule.yml"></a>2.1 rule.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tableRules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mod-long</span></span><br><span class="line">    <span class="attr">function:</span> <span class="string">mod-long</span></span><br><span class="line">    <span class="attr">columns:</span> <span class="string">id</span></span><br><span class="line"></span><br><span class="line"><span class="attr">functions:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mod-long</span></span><br><span class="line">    <span class="attr">className:</span> <span class="string">io.mycat.router.function.PartitionByFunction</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">count:</span> <span class="number">4</span>    <span class="comment"># 分片数量</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-schema-yml"><a href="#2-2-schema-yml" class="headerlink" title="2.2 schema.yml"></a>2.2 schema.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">schemas:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">testdb</span></span><br><span class="line">    <span class="attr">tables:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">orders</span></span><br><span class="line">        <span class="attr">primaryKey:</span> <span class="string">id</span></span><br><span class="line">        <span class="attr">dataNodes:</span> <span class="string">dn0,dn1,dn2,dn3</span></span><br><span class="line">        <span class="attr">rule:</span> <span class="string">mod-long</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-datasource-yml"><a href="#2-3-datasource-yml" class="headerlink" title="2.3 datasource.yml"></a>2.3 datasource.yml</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataNodes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dn0</span></span><br><span class="line">    <span class="attr">dataHost:</span> <span class="string">host1</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">db0</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dn1</span></span><br><span class="line">    <span class="attr">dataHost:</span> <span class="string">host1</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">db1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dn2</span></span><br><span class="line">    <span class="attr">dataHost:</span> <span class="string">host1</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">db2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dn3</span></span><br><span class="line">    <span class="attr">dataHost:</span> <span class="string">host1</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">db3</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dataHosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">host1</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">mysql</span></span><br><span class="line">    <span class="attr">maxCon:</span> <span class="number">1000</span></span><br><span class="line">    <span class="attr">minCon:</span> <span class="number">10</span></span><br><span class="line">    <span class="attr">heartbeat:</span></span><br><span class="line">      <span class="attr">statement:</span> <span class="string">select</span> <span class="string">user()</span></span><br><span class="line">    <span class="attr">writeHosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">master</span></span><br><span class="line">        <span class="attr">url:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span><span class="string">:3306</span></span><br><span class="line">        <span class="attr">user:</span> <span class="string">mycat</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">MyCat@123</span></span><br></pre></td></tr></table></figure>

<h2 id="三、环境准备"><a href="#三、环境准备" class="headerlink" title="三、环境准备"></a>三、环境准备</h2><h3 id="3-1-创建数据库"><a href="#3-1-创建数据库" class="headerlink" title="3.1 创建数据库"></a>3.1 创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建 4 个数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db0 <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db1 <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db2 <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db3 <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-创建表"><a href="#3-2-创建表" class="headerlink" title="3.2 创建表"></a>3.2 创建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在每个数据库创建相同的表</span></span><br><span class="line"><span class="keyword">CREATE TABLE</span> orders (</span><br><span class="line">    id <span class="type">BIGINT</span> <span class="keyword">PRIMARY KEY</span>,</span><br><span class="line">    order_no <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    user_id <span class="type">BIGINT</span>,</span><br><span class="line">    amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>),</span><br><span class="line">    status TINYINT,</span><br><span class="line">    created_at DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br></pre></td></tr></table></figure>

<h2 id="四、测试验证"><a href="#四、测试验证" class="headerlink" title="四、测试验证"></a>四、测试验证</h2><h3 id="4-1-插入数据"><a href="#4-1-插入数据" class="headerlink" title="4.1 插入数据"></a>4.1 插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">USE testdb;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入 10 条数据</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;ORD001&#x27;</span>, <span class="number">100</span>, <span class="number">199.99</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;ORD002&#x27;</span>, <span class="number">101</span>, <span class="number">299.99</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;ORD003&#x27;</span>, <span class="number">102</span>, <span class="number">399.99</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;ORD004&#x27;</span>, <span class="number">103</span>, <span class="number">499.99</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;ORD005&#x27;</span>, <span class="number">104</span>, <span class="number">599.99</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;ORD006&#x27;</span>, <span class="number">105</span>, <span class="number">699.99</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;ORD007&#x27;</span>, <span class="number">106</span>, <span class="number">799.99</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;ORD008&#x27;</span>, <span class="number">107</span>, <span class="number">899.99</span>),</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;ORD009&#x27;</span>, <span class="number">108</span>, <span class="number">999.99</span>),</span><br><span class="line">(<span class="number">10</span>, <span class="string">&#x27;ORD010&#x27;</span>, <span class="number">109</span>, <span class="number">1099.99</span>);</span><br></pre></td></tr></table></figure>

<p><strong>数据分布</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">id=1 → 1%4=1 → db1</span><br><span class="line">id=2 → 2%4=2 → db2</span><br><span class="line">id=3 → 3%4=3 → db3</span><br><span class="line">id=4 → 4%4=0 → db0</span><br><span class="line">id=5 → 5%4=1 → db1</span><br><span class="line">id=6 → 6%4=2 → db2</span><br><span class="line">id=7 → 7%4=3 → db3</span><br><span class="line">id=8 → 8%4=0 → db0</span><br><span class="line">id=9 → 9%4=1 → db1</span><br><span class="line">id=10 → 10%4=2 → db2</span><br></pre></td></tr></table></figure>

<h3 id="4-2-查询数据"><a href="#4-2-查询数据" class="headerlink" title="4.2 查询数据"></a>4.2 查询数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询全部数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 单分片查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多分片查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 聚合查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(amount) <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-验证数据分布"><a href="#4-3-验证数据分布" class="headerlink" title="4.3 验证数据分布"></a>4.3 验证数据分布</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在物理库查看</span></span><br><span class="line">mysql <span class="operator">-</span>u mycat <span class="operator">-</span>p <span class="operator">-</span>h <span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- db0</span></span><br><span class="line">USE db0;</span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="comment">-- 应该返回：4, 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- db1</span></span><br><span class="line">USE db1;</span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="comment">-- 应该返回：1, 5, 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- db2</span></span><br><span class="line">USE db2;</span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="comment">-- 应该返回：2, 6, 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- db3</span></span><br><span class="line">USE db3;</span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> orders;</span><br><span class="line"><span class="comment">-- 应该返回：3, 7</span></span><br></pre></td></tr></table></figure>

<h2 id="五、按-user-id-取模"><a href="#五、按-user-id-取模" class="headerlink" title="五、按 user_id 取模"></a>五、按 user_id 取模</h2><h3 id="5-1-配置"><a href="#5-1-配置" class="headerlink" title="5.1 配置"></a>5.1 配置</h3><p><strong>rule.yml</strong>：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tableRules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mod-user</span></span><br><span class="line">    <span class="attr">function:</span> <span class="string">mod-user</span></span><br><span class="line">    <span class="attr">columns:</span> <span class="string">user_id</span></span><br><span class="line"></span><br><span class="line"><span class="attr">functions:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">mod-user</span></span><br><span class="line">    <span class="attr">className:</span> <span class="string">io.mycat.router.function.PartitionByFunction</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">count:</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>schema.yml</strong>：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">schemas:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">testdb</span></span><br><span class="line">    <span class="attr">tables:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">orders</span></span><br><span class="line">        <span class="attr">primaryKey:</span> <span class="string">id</span></span><br><span class="line">        <span class="attr">dataNodes:</span> <span class="string">dn0,dn1,dn2,dn3</span></span><br><span class="line">        <span class="attr">rule:</span> <span class="string">mod-user</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-测试"><a href="#5-2-测试" class="headerlink" title="5.2 测试"></a>5.2 测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;ORD001&#x27;</span>, <span class="number">100</span>, <span class="number">199.99</span>),  <span class="comment">-- 100%4=0 → db0</span></span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;ORD002&#x27;</span>, <span class="number">101</span>, <span class="number">299.99</span>),  <span class="comment">-- 101%4=1 → db1</span></span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;ORD003&#x27;</span>, <span class="number">102</span>, <span class="number">399.99</span>),  <span class="comment">-- 102%4=2 → db2</span></span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;ORD004&#x27;</span>, <span class="number">103</span>, <span class="number">499.99</span>);  <span class="comment">-- 103%4=3 → db3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按 user_id 查询（单分片）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<h2 id="六、批量插入测试"><a href="#六、批量插入测试" class="headerlink" title="六、批量插入测试"></a>六、批量插入测试</h2><h3 id="6-1-存储过程"><a href="#6-1-存储过程" class="headerlink" title="6.1 存储过程"></a>6.1 存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> batch_insert_orders(<span class="keyword">IN</span> count <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> v_user_id <span class="type">BIGINT</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> v_amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    WHILE i <span class="operator">&lt;=</span> count DO</span><br><span class="line">        <span class="keyword">SET</span> v_user_id <span class="operator">=</span> <span class="built_in">FLOOR</span>(RAND() <span class="operator">*</span> <span class="number">1000</span>) <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">SET</span> v_amount <span class="operator">=</span> ROUND(RAND() <span class="operator">*</span> <span class="number">1000</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">INSERT INTO</span> orders (id, order_no, user_id, amount)</span><br><span class="line">        <span class="keyword">VALUES</span> (i <span class="operator">+</span> <span class="number">100</span>, CONCAT(<span class="string">&#x27;ORD&#x27;</span>, LPAD(i <span class="operator">+</span> <span class="number">100</span>, <span class="number">6</span>, <span class="string">&#x27;0&#x27;</span>)), v_user_id, v_amount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入 1000 条数据</span></span><br><span class="line"><span class="keyword">CALL</span> batch_insert_orders(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6-2-查看数据分布"><a href="#6-2-查看数据分布" class="headerlink" title="6.2 查看数据分布"></a>6.2 查看数据分布</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看各分片数据量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;db0&#x27;</span> <span class="keyword">AS</span> database_name, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> db0.orders</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;db1&#x27;</span> <span class="keyword">AS</span> database_name, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> db1.orders</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;db2&#x27;</span> <span class="keyword">AS</span> database_name, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> db2.orders</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">&#x27;db3&#x27;</span> <span class="keyword">AS</span> database_name, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> db3.orders;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 预期结果：各分片数据量大致相等</span></span><br></pre></td></tr></table></figure>

<h2 id="七、扩容方案"><a href="#七、扩容方案" class="headerlink" title="七、扩容方案"></a>七、扩容方案</h2><h3 id="7-1-问题"><a href="#7-1-问题" class="headerlink" title="7.1 问题"></a>7.1 问题</h3><p>取模分片扩容时需要 rehash：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">原分片数：4</span><br><span class="line">新分片数：8</span><br><span class="line"></span><br><span class="line">id=1: 1%4=1 → 1%8=1 (不变)</span><br><span class="line">id=5: 5%4=1 → 5%8=5 (变化)</span><br></pre></td></tr></table></figure>

<h3 id="7-2-解决方案"><a href="#7-2-解决方案" class="headerlink" title="7.2 解决方案"></a>7.2 解决方案</h3><p><strong>方案 1：双倍扩容</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4 → 8 → 16</span><br><span class="line">每次翻倍，部分数据不需要迁移</span><br></pre></td></tr></table></figure>

<p><strong>方案 2：数据迁移</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 双写新旧分片</span><br><span class="line">2. 逐步迁移历史数据</span><br><span class="line">3. 切换路由规则</span><br></pre></td></tr></table></figure>

<h2 id="八、小结"><a href="#八、小结" class="headerlink" title="八、小结"></a>八、小结</h2><h3 id="取模分片要点"><a href="#取模分片要点" class="headerlink" title="取模分片要点"></a>取模分片要点</h3><ol>
<li><strong>数据分布</strong>：均匀分布到各分片</li>
<li><strong>查询效率</strong>：单分片查询效率高</li>
<li><strong>扩容困难</strong>：需要 rehash 或数据迁移</li>
<li><strong>适用场景</strong>：用户订单、用户数据等</li>
</ol>
<h3 id="配置总结"><a href="#配置总结" class="headerlink" title="配置总结"></a>配置总结</h3><table>
<thead>
<tr>
<th>配置项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>mod-long</td>
<td>取模分片规则</td>
</tr>
<tr>
<td>count</td>
<td>分片数量</td>
</tr>
<tr>
<td>columns</td>
<td>分片字段</td>
</tr>
</tbody></table>
<hr>
<p><strong>下一篇</strong>：[MySQL 运维篇 04-09 MyCat 一致性 Hash](&#x2F;2026&#x2F;02&#x2F;24&#x2F;MySQL 运维篇 04-09 MyCat 一致性 Hash&#x2F;)</p>
<p><strong>上一篇</strong>：[MySQL 运维篇 04-07 MyCat 范围分片](&#x2F;2026&#x2F;02&#x2F;24&#x2F;MySQL 运维篇 04-07 MyCat 范围分片&#x2F;)</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io">过拟合的炸鱼薯条</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/">https://brian-lin-c.github.io/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-08%20MyCat%20%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://brian-lin-c.github.io" target="_blank">过拟合的炸鱼薯条</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/%E5%AE%9E%E6%88%98/">实战</a><a class="post-meta__tags" href="/tags/MyCat/">MyCat</a><a class="post-meta__tags" href="/tags/%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87/">取模分片</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/02/24/Linux%20%E4%B8%8E%20Shell%EF%BC%88%E4%B8%80%EF%BC%89Linux%20%E5%9F%BA%E7%A1%80%E4%B8%8E%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="Linux 与 Shell（一）Linux 基础与常用命令"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Linux 与 Shell（一）Linux 基础与常用命令</div></div><div class="info-2"><div class="info-item-1">Linux 与 Shell（一）Linux 基础与常用命令Linux 是服务器端最主流的操作系统。本篇将介绍 Linux 基础、常用命令、文件权限和进程管理，帮助你快速上手 Linux 系统操作。 一、Linux 基础1.1 Linux 简介Linux 是一个开源、免费的操作系统内核，具有以下特点：  开源免费：源代码开放，可自由使用和修改 多用户多任务：支持多个用户同时执行多个任务 稳定可靠：服务器首选操作系统 强大的命令行：Shell 提供强大的文本操作能力  1.2 常见 Linux 发行版   发行版 特点 适用场景    Ubuntu 易用、社区活跃 桌面、服务器   CentOS&#x2F;RHEL 稳定、企业支持 企业服务器   Debian 稳定、软件丰富 服务器   Fedora 新技术先行 开发测试   Alpine 轻量、安全 容器、嵌入式   1.3 目录结构1234567891011121314151617181920/├── bin/          # 常用命令├── boot/         # 启动文件├── dev/          # ...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-07%20MyCat%20%E8%8C%83%E5%9B%B4%E5%88%86%E7%89%87/" title="MySQL 运维篇 04-07 MyCat 范围分片"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MySQL 运维篇 04-07 MyCat 范围分片</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-07 MyCat 范围分片范围分片是按照某个字段的范围进行数据分片。本文将介绍如何使用 MyCat 实现范围分片。 一、范围分片介绍1.1 什么是范围分片范围分片：根据分片键的值范围将数据分布到不同的分片中。 1234按 ID 范围分片：分片 0: id 1-1000000分片 1: id 1000001-2000000分片 2: id 2000001-3000000  1.2 适用场景   场景 说明    日期数据 按时间范围归档   有序 ID 按 ID 范围分布   地区数据 按地区编码范围   1.3 优缺点优点：  范围查询效率高 便于历史数据归档 扩容相对容易  缺点：  数据可能分布不均 热点问题（最新数据集中）  二、按日期范围分片2.1 配置rule.yml： 123456789101112tableRules:  - name: range-date    function: range-date    columns: created_atfunctions:  - name: range-date    className: i...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-07%20MyCat%20%E8%8C%83%E5%9B%B4%E5%88%86%E7%89%87/" title="MySQL 运维篇 04-07 MyCat 范围分片"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-07 MyCat 范围分片</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-07 MyCat 范围分片范围分片是按照某个字段的范围进行数据分片。本文将介绍如何使用 MyCat 实现范围分片。 一、范围分片介绍1.1 什么是范围分片范围分片：根据分片键的值范围将数据分布到不同的分片中。 1234按 ID 范围分片：分片 0: id 1-1000000分片 1: id 1000001-2000000分片 2: id 2000001-3000000  1.2 适用场景   场景 说明    日期数据 按时间范围归档   有序 ID 按 ID 范围分布   地区数据 按地区编码范围   1.3 优缺点优点：  范围查询效率高 便于历史数据归档 扩容相对容易  缺点：  数据可能分布不均 热点问题（最新数据集中）  二、按日期范围分片2.1 配置rule.yml： 123456789101112tableRules:  - name: range-date    function: range-date    columns: created_atfunctions:  - name: range-date    className: i...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-06%20MyCat%20%E6%B0%B4%E5%B9%B3%E5%88%86%E8%A1%A8/" title="MySQL 运维篇 04-06 MyCat 水平分表"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-06 MyCat 水平分表</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-06 MyCat 水平分表水平分表是将一个大表的数据按照某种规则分布到多个表中。本文将介绍如何使用 MyCat 实现水平分表。 一、水平分表介绍1.1 什么是水平分表水平分表：将同一个表的数据按照行拆分到多个物理表中。 12345678原始表：orders (1 亿条数据)水平分表后：orders_0000 (250 万条)orders_0001 (250 万条)orders_0002 (250 万条)orders_0003 (250 万条)  1.2 适用场景   场景 说明    单表数据量大 超过 1000 万行   查询性能下降 索引效率低   维护困难 DDL 操作耗时过长   1.3 分片规则   规则 说明 适用场景    取模 id % 分片数 均匀分布   范围 按 ID 或日期范围 历史数据归档   哈希 hash(key) % 分片数 随机分布   二、环境准备2.1 数据库规划12345order_db├── orders_0000├── orders_0001├── orders_0002└── orders_0003  2.2...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-02%20MyCat%20%E6%B5%8B%E8%AF%95/" title="MySQL 运维篇 04-02 MyCat 测试"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-02 MyCat 测试</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-02 MyCat 测试完成 MyCat 配置后，需要进行全面的测试以验证分库分表功能是否正常。本文将介绍各种测试场景。 一、连接测试1.1 基本连接12# 使用 MySQL 客户端连接 MyCatmysql -h 127.0.0.1 -P 8066 -u root -p123456  1.2 查看数据库1234-- 查看逻辑数据库SHOW DATABASES;-- 输出应该包含 testdb  1.3 查看表123456USE testdb;-- 查看逻辑表SHOW TABLES;-- 输出应该包含 orders  二、CRUD 测试2.1 插入测试123456789101112USE testdb;-- 插入单条记录INSERT INTO orders (id, order_no, user_id, amount, status)VALUES (1, &#x27;ORD001&#x27;, 100, 199.99, 1);-- 插入多条记录INSERT INTO orders (id, order_no, user_id, amount, status...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2003-04%20MyCat%20%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" title="MySQL 运维篇 03-04 MyCat 安装与配置"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 03-04 MyCat 安装与配置</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 03-04 MyCat 安装与配置本文将详细讲解 MyCat 的下载、安装、配置和启动过程，帮助你快速搭建 MyCat 环境。 一、环境准备1.1 系统要求   组件 要求    Java JDK 1.8+   内存 最少 2GB，推荐 4GB+   磁盘 最少 10GB 可用空间   MySQL 5.6+   1.2 环境信息   服务器 IP 地址 角色 软件    server1 192.168.1.100 MyCat + Master MyCat, MySQL   server2 192.168.1.101 Slave MySQL   1.3 安装 JavaLinux (CentOS&#x2F;RHEL)： 12345# 安装 OpenJDK 8yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel# 验证安装java -version  Linux (Ubuntu&#x2F;Debian)： 123456# 安装 OpenJDK 8apt-get updateapt-get install...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-04%20MyCat%20%E5%9E%82%E7%9B%B4%E5%88%86%E5%BA%93/" title="MySQL 运维篇 04-04 MyCat 垂直分库"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-04 MyCat 垂直分库</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-04 MyCat 垂直分库垂直分库是将不同的业务表分布到不同的数据库中。本文将介绍如何使用 MyCat 实现垂直分库。 一、垂直分库介绍1.1 什么是垂直分库垂直分库：按照业务模块将表拆分到不同的数据库中。 1234567原始架构：single_db (users, orders, products, logs, ...)垂直分库后：user_db (users, user_profile, user_login, ...)order_db (orders, order_detail, order_log, ...)product_db (products, category, brand, ...)  1.2 适用场景   场景 说明    业务模块清晰 各模块相对独立   表数量过多 单库表数量超过 100   访问量差异大 热门表和冷门表分离   团队分工 不同团队负责不同模块   1.3 优缺点优点：  业务清晰，便于管理 减少单库压力 便于水平扩展  缺点：  跨库 JOIN 复杂 事务处理困难 增加运维成本  二、环境准备2.1 数据库规划 ...</div></div></div></a><a class="pagination-related" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-03%20MyCat%20%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/" title="MySQL 运维篇 04-03 MyCat 配置详解"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-24</div><div class="info-item-2">MySQL 运维篇 04-03 MyCat 配置详解</div></div><div class="info-2"><div class="info-item-1">MySQL 运维篇 04-03 MyCat 配置详解本文将详细讲解 MyCat 的各个配置文件，包括 server.yml、schema.yml、datasource.yml 和 rule.yml 的完整配置说明。 一、配置文件概述1.1 配置文件位置1234567/opt/mycat/conf/├── server.yml         # 主配置文件├── schema.yml         # Schema 配置├── datasource.yml     # 数据源配置├── rule.yml           # 分片规则配置├── sequence.yml       # 全局序列配置└── log4j2.xml         # 日志配置  1.2 配置加载顺序12341. server.yml (系统配置)2. datasource.yml (数据源)3. schema.yml (Schema 和表)4. rule.yml (分片规则)  二、server.yml 详解2.1 完整配置示例1234567891011121314151617181920212...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">过拟合的炸鱼薯条</div><div class="author-info-description">好好学习，天天向上</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">157</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Brian-Lin-C"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Brian-Lin-C" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的个人博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E8%BF%90%E7%BB%B4%E7%AF%87-04-08-MyCat-%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87"><span class="toc-number">1.</span> <span class="toc-text">MySQL 运维篇 04-08 MyCat 取模分片</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">一、取模分片介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 什么是取模分片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 优缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">二、基础配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-rule-yml"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 rule.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-schema-yml"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 schema.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-datasource-yml"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 datasource.yml</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-number">1.3.</span> <span class="toc-text">三、环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 创建表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%B5%8B%E8%AF%95%E9%AA%8C%E8%AF%81"><span class="toc-number">1.4.</span> <span class="toc-text">四、测试验证</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 查询数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E9%AA%8C%E8%AF%81%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 验证数据分布</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%8C%89-user-id-%E5%8F%96%E6%A8%A1"><span class="toc-number">1.5.</span> <span class="toc-text">五、按 user_id 取模</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%B5%8B%E8%AF%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%B5%8B%E8%AF%95"><span class="toc-number">1.6.</span> <span class="toc-text">六、批量插入测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%88%86%E5%B8%83"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 查看数据分布</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%89%A9%E5%AE%B9%E6%96%B9%E6%A1%88"><span class="toc-number">1.7.</span> <span class="toc-text">七、扩容方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E9%97%AE%E9%A2%98"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%B0%8F%E7%BB%93"><span class="toc-number">1.8.</span> <span class="toc-text">八、小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%A8%A1%E5%88%86%E7%89%87%E8%A6%81%E7%82%B9"><span class="toc-number">1.8.1.</span> <span class="toc-text">取模分片要点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93"><span class="toc-number">1.8.2.</span> <span class="toc-text">配置总结</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/IDE%20%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%EF%BC%9AVS%20Code%20+%20Jupyter%20+%20DataGrip/" title="IDE 工具配置：VS Code + Jupyter + DataGrip">IDE 工具配置：VS Code + Jupyter + DataGrip</a><time datetime="2026-02-24T15:00:00.000Z" title="发表于 2026-02-24 23:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Git%20%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/" title="Git 版本控制与团队协作">Git 版本控制与团队协作</a><time datetime="2026-02-24T14:00:00.000Z" title="发表于 2026-02-24 22:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/Linux%20%E4%B8%8E%20Shell%EF%BC%88%E4%BA%8C%EF%BC%89Shell%20%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99/" title="Linux 与 Shell（二）Shell 脚本编写">Linux 与 Shell（二）Shell 脚本编写</a><time datetime="2026-02-24T13:00:00.000Z" title="发表于 2026-02-24 21:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3%20-%20%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E3%80%81%E6%95%B0%E6%8D%AE%E5%88%86%E5%B1%82%E4%B8%8E%20SCD%20%E5%A4%84%E7%90%86/" title="数据仓库核心概念详解 - 维度建模、数据分层与 SCD 处理">数据仓库核心概念详解 - 维度建模、数据分层与 SCD 处理</a><time datetime="2026-02-24T13:00:00.000Z" title="发表于 2026-02-24 21:00:00">2026-02-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/24/MySQL%20%E8%BF%90%E7%BB%B4%E7%AF%87%2004-10%20MyCat%20%E7%AE%A1%E7%90%86%E4%B8%8E%E7%9B%91%E6%8E%A7/" title="MySQL 运维篇 04-10 MyCat 管理与监控">MySQL 运维篇 04-10 MyCat 管理与监控</a><time datetime="2026-02-24T12:05:00.000Z" title="发表于 2026-02-24 20:05:00">2026-02-24</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 过拟合的炸鱼薯条</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.4</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.4"></script><script src="/js/main.js?v=5.5.4"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索..." type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.4"></script></div></div></body></html>